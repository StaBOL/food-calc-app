<!DOCTYPE html>
<html lang="ru" id="html-lang">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—á–∏—Ç–∞–π—Ç–µ –∫–∞–ª–æ—Ä–∏–∏ –≥–¥–µ —É–≥–æ–¥–Ω–æ!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        
        body {
            min-height: 100vh;
            color: white;
            transition: all 0.5s;
            overflow-x: hidden;
        }
        
        /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü */
        .page {
            display: none;
            position: absolute;
            top: 0px;
            left: 0;
            width: 100%;
            height: calc(100% - 0px);
            padding: 250px;
        }
        
        .page.active {
            display: block;
        }
        
        /* –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ */
        .main-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            min-height: calc(100vh - 0px);
        }
        
        .main-title {
            font-size: 36px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .account-page {
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            min-height: calc(100vh - 60px);
        }

        .settings-page {
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            min-height: calc(100vh - 60px);
        }

        .calculator-choice-page {
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            min-height: calc(100vh - 60px);
        }

        .smart-calc-page {
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            min-height: calc(100vh - 60px);
        }

        .result-page {
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            
        }

        .manual-calc-page {
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            min-height: calc(100vh - 60px);
        }

        .user-profile-page {
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            min-height: calc(100vh - 60px);
        }

        .ready-meals-page {
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            min-height: calc(100vh - 60px);
        }

        /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–Ω—ã—Ö –±–ª–æ–∫–æ–≤ */
        .content-box {
            background-color: rgba(0, 0, 0, 0.7);
            width: 100%;
            max-width: 500px;
            margin: 20px auto;
            padding: 20px;
            border-radius: 10px;
            box-sizing: border-box;
            position: relative;
        }
        
        .option {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            margin: 10px 0;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .option:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .option.selected {
            background: rgba(255,255,255,0.3);
            border: 1px solid white;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: rgba(0, 0, 0, 0.2);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 100;
            height: 60px;
        }
        
        .header-icons {
            display: flex;
            gap: 15px;
        }
        
        .header-icons img {
            width: 24px;
            height: 24px;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .header-icons img:hover {
            transform: scale(1.1);
        }
        
        .logo {
            font-weight: bold;
            font-size: 20px;
            color: #DFFF00;
        }
        
        .logo span {
            color: white;
        }
        
        /* –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é */
        .side-menu {
            position: fixed;
            top: 0;
            left: -250px;
            width: 250px;
            height: 100%;
            background: #1e871e;
            color: white;
            padding: 20px;
            box-shadow: 2px 0 10px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            z-index: 1000;
            opacity: 0;
        }
        
        .side-menu.open {
            left: 0;
            opacity: 1;
        }
        
        .menu-item {
            margin: 20px 0;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            padding: 8px;
            border-radius: 5px;
            transition: background 0.3s;
        }
        
        .menu-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .menu-item img {
            width: 24px;
            height: 24px;
        }
        
        /* –û–≤–µ—Ä–ª–µ–π –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é */
        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }
        
        .menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º—ã */
        .form-group {
            margin: 15px 0;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            text-align: left;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: none;
            border-radius: 5px;
            background: rgba(255,255,255,0.9);
            font-size: 16px;
        }
        
        .btn {
            background: #DFFF00;
            color: #1e871e;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: background 0.3s;
            font-size: 16px;
            width: 100%;
        }
        
        .btn:hover {
            background: #CDDC39;
        }
        
        .link {
            color: white;
            text-decoration: none;
            font-size: 14px;
            display: inline-block;
            margin: 10px 5px;
            transition: color 0.3s;
        }
        
        .link:hover {
            color: #DFFF00;
            text-decoration: underline;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º—ã —É–º–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ */
        .gender-selection {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .gender-option {
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            text-align: center;
            margin: 0 5px;
        }
        
        .gender-option.selected {
            background: rgba(255,255,255,0.3);
            border: 1px solid white;
        }
        
        .selection-title {
            margin: 15px 0 10px;
            text-align: left;
        }
        
        .meals-per-day {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }
        
        .meal-option {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .meal-option.selected {
            background: rgba(255,255,255,0.3);
            border: 1px solid white;
            transform: scale(1.1);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
        .result-item {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
        }
        
        .result-value {
            font-size: 28px;
            font-weight: bold;
            color: #DFFF00;
            margin: 10px 0;
        }
        
        .meal-plan {
            margin-top: 25px;
            text-align: left;
        }
        
        .meal-item {
            padding: 12px;
            margin: 8px 0;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ */
        .search-results {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
            border-radius: 5px;
            background: rgba(255,255,255,0.1);
        }
        
        .product-item {
            padding: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .product-item:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .product-name {
            font-weight: bold;
        }
        
        .product-brand {
            font-size: 12px;
            color: #ccc;
        }
        
        .nutrients-row {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .nutrient {
            flex: 1;
            text-align: center;
            padding: 5px;
            background: rgba(0,0,0,0.3);
            border-radius: 3px;
            margin: 0 2px;
        }
        
        .nutrient-value {
            font-weight: bold;
            color: #DFFF00;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–ø–∏—Å–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ */
        .added-product {
            padding: 10px;
            margin: 10px 0;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .product-info {
            flex: 1;
            text-align: left;
        }
        
        .product-actions {
            display: flex;
            gap: 10px;
        }
        
        .delete-btn {
            background: #ff5252;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –∏–∫–æ–Ω–∫–∏ –º–µ–Ω—é */
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .menu-animate {
            animation: bounce 0.5s;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        @media (max-width: 480px) {
            .main-title {
                font-size: 28px;
            }
            
            .content-box {
                padding: 15px;
            }
            
            .option {
                padding: 12px;
            }
            
            .gender-option {
                padding: 10px 15px;
                font-size: 14px;
            }
            
            .page {
                padding: 100px 15px;
            }
        }
    </style>
</head>
<body>
    <!-- –û–±—â–∏–π header –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü -->
    <header>
        <div class="header-icons">
            <img id="back-btn" src="https://img.icons8.com/ios-filled/50/ffffff/back.png" alt="–ù–∞–∑–∞–¥">
            <img id="refresh-btn" src="https://img.icons8.com/ios-filled/50/ffffff/synchronize.png" alt="–û–±–Ω–æ–≤–∏—Ç—å">
            <img id="menu-btn" src="https://img.icons8.com/ios-filled/50/ffffff/menu.png" alt="–ú–µ–Ω—é">
        </div>
        <div class="logo">FOOD & <span>CALCULATE</span></div>
    </header>
    
    <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
    <div class="page main-page active" id="main-page">
        <h1 class="main-title" data-lang-ru="–°—á–∏—Ç–∞–π—Ç–µ –∫–∞–ª–æ—Ä–∏–∏ –≥–¥–µ —É–≥–æ–¥–Ω–æ!" data-lang-en="Count calories anywhere!">–°—á–∏—Ç–∞–π—Ç–µ –∫–∞–ª–æ—Ä–∏–∏ –≥–¥–µ —É–≥–æ–¥–Ω–æ!</h1>
        <div class="content-box">
            <p data-lang-ru="–ù–∞—á–Ω–∏—Ç–µ —Ä–∞–±–æ—Ç—É —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º, –≤—ã–±—Ä–∞–≤ –Ω—É–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª –≤ –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é" data-lang-en="Start using the app by selecting a section in the side menu">
                –ù–∞—á–Ω–∏—Ç–µ —Ä–∞–±–æ—Ç—É —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º, –≤—ã–±—Ä–∞–≤ –Ω—É–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª –≤ –º–µ–Ω—é
            </p>
        </div>
    </div>
    
    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ -->
    <div class="page account-page" id="account-page">
        <div class="content-box">
            <h2 data-lang-ru="–í—Ö–æ–¥" data-lang-en="Login">–í—Ö–æ–¥</h2>
            <form id="login-form">
                <div class="form-group">
                    <input type="text" placeholder="–ò–º—è –∞–∫–∫–∞—É–Ω—Ç–∞" data-lang-ru-placeholder="–ò–º—è –∞–∫–∫–∞—É–Ω—Ç–∞" data-lang-en-placeholder="Account name" required>
                </div>
                <div class="form-group">
                    <input type="password" placeholder="–ü–∞—Ä–æ–ª—å" data-lang-ru-placeholder="–ü–∞—Ä–æ–ª—å" data-lang-en-placeholder="Password" required>
                </div>
                <button type="submit" class="btn" data-lang-ru="–í–æ–π—Ç–∏" data-lang-en="Sign In">–í–æ–π—Ç–∏</button>
                <div style="text-align: center; margin-top: 15px;">
                    <a href="#" class="link" id="forgot-password" data-lang-ru="–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å" data-lang-en="Forgot password">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å</a>
                    <a href="#" class="link" id="register-btn" data-lang-ru="–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" data-lang-en="Register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                </div>
            </form>
        </div>
    </div>
    
    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div class="page settings-page" id="settings-page">
        <div class="content-box">
            <h2 data-lang-ru="–ù–∞—Å—Ç—Ä–æ–π–∫–∏" data-lang-en="Settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
            <h3 class="selection-title" data-lang-ru="–Ø–∑—ã–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è" data-lang-en="App language">–Ø–∑—ã–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h3>
            <div class="option selected" id="lang-ru">
                <span data-lang-ru="–†—É—Å—Å–∫–∏–π" data-lang-en="Russian">–†—É—Å—Å–∫–∏–π</span>
                <span>üá∑üá∫</span>
            </div>
            <div class="option" id="lang-en">
                <span data-lang-ru="–ê–Ω–≥–ª–∏–π—Å–∫–∏–π" data-lang-en="English">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</span>
                <span>üá¨üáß</span>
            </div>
        </div>
    </div>
    
    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ -->
    <div class="page calculator-choice-page" id="calculator-choice-page">
        <div class="content-box">
            <h2 data-lang-ru="–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞" data-lang-en="Choose calculator type">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞</h2>
            <div class="option" id="manual-calculator">
                <img src="https://img.icons8.com/ios-filled/50/ffffff/edit--v1.png" alt="–†—É—á–Ω–æ–π –≤–≤–æ–¥">
                <span data-lang-ru="–†—É—á–Ω–æ–π —Ä–∞—Å—á–µ—Ç" data-lang-en="Manual calculation">–†—É—á–Ω–æ–π —Ä–∞—Å—á–µ—Ç</span>
            </div>
            <div class="option" id="ready-meals-calculator">
                <img src="https://img.icons8.com/ios-filled/50/ffffff/meal.png" alt="–ì–æ—Ç–æ–≤—ã–µ –±–ª—é–¥–∞">
                <span data-lang-ru="–ì–æ—Ç–æ–≤—ã–µ –±–ª—é–¥–∞" data-lang-en="Ready meals">–ì–æ—Ç–æ–≤—ã–µ –±–ª—é–¥–∞</span>
            </div>
        </div>
    </div>
    
    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ -->
    <div class="page manual-calc-page" id="manual-calc-page">
        <div class="content-box">
            <h2 data-lang-ru="–†—É—á–Ω–æ–π —Ä–∞—Å—á–µ—Ç –∫–∞–ª–æ—Ä–∏–π" data-lang-en="Manual calories calculation">–†—É—á–Ω–æ–π —Ä–∞—Å—á–µ—Ç –∫–∞–ª–æ—Ä–∏–π</h2>
            
            <div class="form-group">
                <label data-lang-ru="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞" data-lang-en="Product name">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞</label>
                <input type="text" id="product-search" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ" 
                       data-lang-ru-placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ" 
                       data-lang-en-placeholder="Start typing product name">
                <div class="search-results" id="search-results" style="display: none;"></div>
            </div>
            
            <div class="form-group">
                <label data-lang-ru="–í–µ—Å –ø—Ä–æ–¥—É–∫—Ç–∞ (–≥)" data-lang-en="Product weight (g)">–í–µ—Å –ø—Ä–æ–¥—É–∫—Ç–∞ (–≥)</label>
                <input type="number" id="product-weight" min="1" max="10000" value="100">
            </div>
            
            <div class="nutrients-row">
                <div class="nutrient">
                    <div data-lang-ru="–ö–∞–ª–æ—Ä–∏–∏" data-lang-en="Calories">–ö–∞–ª–æ—Ä–∏–∏</div>
                    <div class="nutrient-value" id="manual-calories">0</div>
                    <div>–∫–∫–∞–ª</div>
                </div>
                <div class="nutrient">
                    <div data-lang-ru="–ë–µ–ª–∫–∏" data-lang-en="Proteins">–ë–µ–ª–∫–∏</div>
                    <div class="nutrient-value" id="manual-proteins">0</div>
                    <div>–≥</div>
                </div>
                <div class="nutrient">
                    <div data-lang-ru="–ñ–∏—Ä—ã" data-lang-en="Fats">–ñ–∏—Ä—ã</div>
                    <div class="nutrient-value" id="manual-fats">0</div>
                    <div>–≥</div>
                </div>
                <div class="nutrient">
                    <div data-lang-ru="–£–≥–ª–µ–≤–æ–¥—ã" data-lang-en="Carbs">–£–≥–ª–µ–≤–æ–¥—ã</div>
                    <div class="nutrient-value" id="manual-carbs">0</div>
                    <div>–≥</div>
                </div>
            </div>
            
            <button class="btn" id="add-product-btn" data-lang-ru="–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç" data-lang-en="Add product">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç</button>
            <button class="btn" id="clear-products-btn" data-lang-ru="–û—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫" data-lang-en="Clear list">–û—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>
            
            <div id="products-list" style="margin-top: 20px; text-align: left;"></div>
            
            <div class="nutrients-row" style="margin-top: 20px;">
                <div class="nutrient">
                    <div data-lang-ru="–ò—Ç–æ–≥–æ –∫–∞–ª–æ—Ä–∏–∏" data-lang-en="Total calories">–ò—Ç–æ–≥–æ –∫–∞–ª–æ—Ä–∏–∏</div>
                    <div class="nutrient-value" id="total-calories">0</div>
                    <div>–∫–∫–∞–ª</div>
                </div>
                <div class="nutrient">
                    <div data-lang-ru="–ò—Ç–æ–≥–æ –±–µ–ª–∫–∏" data-lang-en="Total proteins">–ò—Ç–æ–≥–æ –±–µ–ª–∫–∏</div>
                    <div class="nutrient-value" id="total-proteins">0</div>
                    <div>–≥</div>
                </div>
                <div class="nutrient">
                    <div data-lang-ru="–ò—Ç–æ–≥–æ –∂–∏—Ä—ã" data-lang-en="Total fats">–ò—Ç–æ–≥–æ –∂–∏—Ä—ã</div>
                    <div class="nutrient-value" id="total-fats">0</div>
                    <div>–≥</div>
                </div>
                <div class="nutrient">
                    <div data-lang-ru="–ò—Ç–æ–≥–æ —É–≥–ª–µ–≤–æ–¥—ã" data-lang-en="Total carbs">–ò—Ç–æ–≥–æ —É–≥–ª–µ–≤–æ–¥—ã</div>
                    <div class="nutrient-value" id="total-carbs">0</div>
                    <div>–≥</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–º–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ -->
    <div class="page smart-calc-page" id="smart-calc-page">
        <div class="content-box">
            <h2 data-lang-ru="–£–º–Ω—ã–π —Ä–∞—Å—á–µ—Ç –∫–∞–ª–æ—Ä–∏–π" data-lang-en="Smart calories calculation">–£–º–Ω—ã–π —Ä–∞—Å—á–µ—Ç –∫–∞–ª–æ—Ä–∏–π</h2>
            
            <div class="gender-selection">
                <div class="gender-option selected" id="female-option">
                    <span data-lang-ru="–ñ–µ–Ω—â–∏–Ω–∞" data-lang-en="Female">–ñ–µ–Ω—â–∏–Ω–∞</span>
                </div>
                <div class="gender-option" id="male-option">
                    <span data-lang-ru="–ú—É–∂—á–∏–Ω–∞" data-lang-en="Male">–ú—É–∂—á–∏–Ω–∞</span>
                </div>
            </div>
            
            <div class="form-group">
                <label data-lang-ru="–í–æ–∑—Ä–∞—Å—Ç, –ª–µ—Ç" data-lang-en="Age, years">–í–æ–∑—Ä–∞—Å—Ç, –ª–µ—Ç</label>
                <input type="number" id="age-input" min="10" max="120">
            </div>
            
            <div class="form-group">
                <label data-lang-ru="–†–æ—Å—Ç, —Å–º" data-lang-en="Height, cm">–†–æ—Å—Ç, —Å–º</label>
                <input type="number" id="height-input" min="100" max="250">
            </div>
            
            <div class="form-group">
                <label data-lang-ru="–í–µ—Å, –∫–≥" data-lang-en="Weight, kg">–í–µ—Å, –∫–≥</label>
                <input type="number" id="weight-input" min="30" max="300">
            </div>
            
            <h3 class="selection-title" data-lang-ru="–î–Ω–µ–≤–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å" data-lang-en="Daily activity">–î–Ω–µ–≤–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h3>
            <div class="option selected" id="low-activity">
                <span data-lang-ru="–ù–∏–∑–∫–∞—è (—Ö–æ–¥—å–±–∞, –Ω–µ–¥–æ–ª–≥–∏–µ –ø—Ä–æ–≥—É–ª–∫–∏)" data-lang-en="Low (walking, short walks)">–ù–∏–∑–∫–∞—è (—Ö–æ–¥—å–±–∞, –Ω–µ–¥–æ–ª–≥–∏–µ –ø—Ä–æ–≥—É–ª–∫–∏)</span>
            </div>
            <div class="option" id="medium-activity">
                <span data-lang-ru="–°—Ä–µ–¥–Ω—è—è (—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ 3-5 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é)" data-lang-en="Medium (workouts 3-5 times a week)">–°—Ä–µ–¥–Ω—è—è (—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ 3-5 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é)</span>
            </div>
            <div class="option" id="high-activity">
                <span data-lang-ru="–í—ã—Å–æ–∫–∞—è (–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ)" data-lang-en="High (intensive daily workouts)">–í—ã—Å–æ–∫–∞—è (–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ)</span>
            </div>
            
            <h3 class="selection-title" data-lang-ru="–í–∞—à–∞ —Ü–µ–ª—å" data-lang-en="Your goal">–í–∞—à–∞ —Ü–µ–ª—å</h3>
            <div class="option selected" id="lose-weight">
                <span data-lang-ru="–°–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å" data-lang-en="Lose weight">–°–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å</span>
            </div>
            <div class="option" id="maintain-weight">
                <span data-lang-ru="–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤–µ—Å" data-lang-en="Maintain weight">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤–µ—Å</span>
            </div>
            <div class="option" id="gain-weight">
                <span data-lang-ru="–ù–∞–±—Ä–∞—Ç—å –≤–µ—Å" data-lang-en="Gain weight">–ù–∞–±—Ä–∞—Ç—å –≤–µ—Å</span>
            </div>
            
            <h3 class="selection-title" data-lang-ru="–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞" data-lang-en="Calculation formula">–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞</h3>
            <div class="option selected" id="harris-formula">
                <span data-lang-ru="–•–∞—Ä—Ä–∏—Å–∞-–ë–µ–Ω–µ–¥–∏–∫—Ç–∞" data-lang-en="Harris-Benedict">–•–∞—Ä—Ä–∏—Å–∞-–ë–µ–Ω–µ–¥–∏–∫—Ç–∞</span>
            </div>
            <div class="option" id="mifflin-formula">
                <span data-lang-ru="–ú–∏—Ñ—Ñ–ª–∏–Ω–∞-–°–∞–Ω –ñ–µ–æ—Ä–∞" data-lang-en="Mifflin-St Jeor">–ú–∏—Ñ—Ñ–ª–∏–Ω–∞-–°–∞–Ω –ñ–µ–æ—Ä–∞</span>
            </div>
            
            <h3 class="selection-title" data-lang-ru="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–µ–º–æ–≤ –ø–∏—â–∏ –≤ –¥–µ–Ω—å" data-lang-en="Number of meals per day">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–µ–º–æ–≤ –ø–∏—â–∏ –≤ –¥–µ–Ω—å</h3>
            <div class="meals-per-day">
                <div class="meal-option selected" data-meals="3">3</div>
                <div class="meal-option" data-meals="4">4</div>
                <div class="meal-option" data-meals="5">5</div>
                <div class="meal-option" data-meals="6">6</div>
            </div>
            
            <button class="btn" id="calculate-btn" data-lang-ru="–†–∞—Å—Å—á–∏—Ç–∞—Ç—å" data-lang-en="Calculate">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
        </div>
    </div>
    
    
    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≥–æ—Ç–æ–≤—ã—Ö –ü–ü-–±–ª—é–¥ -->
    <div class="page ready-meals-page" id="ready-meals-page">
        <div class="content-box">
            <h2 data-lang-ru="–ì–æ—Ç–æ–≤—ã–µ –ü–ü-–±–ª—é–¥–∞" data-lang-en="Healthy Meals">–ì–æ—Ç–æ–≤—ã–µ –ü–ü-–±–ª—é–¥–∞</h2>

            <div class="meal-item">
                <strong>–û–≤—Å—è–Ω–∫–∞ —Å —è–≥–æ–¥–∞–º–∏</strong><br>
                –ö–∞–ª–æ—Ä–∏–∏: 250 –∫–∫–∞–ª<br>–ë–µ–ª–∫–∏: 8 –≥ | –ñ–∏—Ä—ã: 5 –≥ | –£–≥–ª–µ–≤–æ–¥—ã: 40 –≥
            </div>
            <div class="meal-item">
                <strong>–ö—É—Ä–∏–Ω–∞—è –≥—Ä—É–¥–∫–∞ —Å –≥—Ä–µ—á–∫–æ–π –∏ –æ–≤–æ—â–∞–º–∏</strong><br>
                –ö–∞–ª–æ—Ä–∏–∏: 350 –∫–∫–∞–ª<br>–ë–µ–ª–∫–∏: 30 –≥ | –ñ–∏—Ä—ã: 8 –≥ | –£–≥–ª–µ–≤–æ–¥—ã: 35 –≥
            </div>
            <div class="meal-item">
                <strong>–°–∞–ª–∞—Ç —Å —Ç—É–Ω—Ü–æ–º –∏ —è–π—Ü–æ–º</strong><br>
                –ö–∞–ª–æ—Ä–∏–∏: 280 –∫–∫–∞–ª<br>–ë–µ–ª–∫–∏: 22 –≥ | –ñ–∏—Ä—ã: 15 –≥ | –£–≥–ª–µ–≤–æ–¥—ã: 10 –≥
            </div>
            <div class="meal-item">
                <strong>–û–≤–æ—â–Ω–æ–µ —Ä–∞–≥—É —Å —á–µ—á–µ–≤–∏—Ü–µ–π</strong><br>
                –ö–∞–ª–æ—Ä–∏–∏: 320 –∫–∫–∞–ª<br>–ë–µ–ª–∫–∏: 18 –≥ | –ñ–∏—Ä—ã: 6 –≥ | –£–≥–ª–µ–≤–æ–¥—ã: 45 –≥
            </div>

            <button class="btn" id="back-to-calculator-choice" data-lang-ru="–ù–∞–∑–∞–¥" data-lang-en="Back">–ù–∞–∑–∞–¥</button>
        </div>
    </div>


    
    
<!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è -->
<div class="page account-page" id="recover-page">
    <div class="content-box">
        <h2 data-lang-ru="–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è" data-lang-en="Password Recovery">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</h2>
        <form id="recover-form">
            <div class="form-group">
                <input type="text" id="recover-username" placeholder="–ò–º—è –∞–∫–∫–∞—É–Ω—Ç–∞" required>
            </div>
            <div class="form-group">
                <input type="password" id="new-password" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å" required>
            </div>
            <div class="form-group">
                <input type="password" id="confirm-password" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
            </div>
            <button type="submit" class="btn" data-lang-ru="–°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å" data-lang-en="Reset Password">–°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
        </form>
    </div>
</div>


<!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
<div class="page account-page" id="register-page">
    <div class="content-box">
        <h2 data-lang-ru="–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" data-lang-en="Registration">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
        <form id="register-form">
            <div class="form-group">
                <input type="text" id="register-username" placeholder="–ò–º—è –∞–∫–∫–∞—É–Ω—Ç–∞" required>
            </div>
            <div class="form-group">
                <input type="password" id="register-password" placeholder="–ü–∞—Ä–æ–ª—å" required>
            </div>
            <div class="form-group">
                <input type="password" id="register-confirm" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
            </div>
            <button type="submit" class="btn" data-lang-ru="–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è" data-lang-en="Register">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        </form>
    </div>
</div>

<!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div class="page user-profile-page" id="user-profile-page">
        <div class="content-box">
            <h2 data-lang-ru="–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" data-lang-en="User Profile">–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
            <p data-lang-ru="–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –≤–∞—à –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç!" data-lang-en="Welcome to your personal dashboard!">
                –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –≤–∞—à –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç!
            </p>
            <button class="btn" id="back-to-main-from-profile" data-lang-ru="–ù–∞ –≥–ª–∞–≤–Ω—É—é" data-lang-en="To main">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
        </div>
    </div>


    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
    <div class="page result-page" id="result-page">
        <div class="content-box">
            <h2 data-lang-ru="–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞" data-lang-en="Calculation results">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</h2>
            
            <div class="result-item">
                <div data-lang-ru="–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –Ω–æ—Ä–º–∞ –∫–∞–ª–æ—Ä–∏–π" data-lang-en="Recommended calorie intake">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –Ω–æ—Ä–º–∞ –∫–∞–ª–æ—Ä–∏–π</div>
                <div class="result-value" id="calories-result">0</div>
                <div data-lang-ru="–∫–∫–∞–ª/–¥–µ–Ω—å" data-lang-en="kcal/day">–∫–∫–∞–ª/–¥–µ–Ω—å</div>
            </div>
            
            <div class="result-item">
                <div data-lang-ru="–ë–µ–ª–∫–∏" data-lang-en="Proteins">–ë–µ–ª–∫–∏</div>
                <div class="result-value" id="proteins-result">0</div>
                <div data-lang-ru="–≥—Ä–∞–º–º/–¥–µ–Ω—å" data-lang-en="grams/day">–≥—Ä–∞–º–º/–¥–µ–Ω—å</div>
            </div>
            
            <div class="result-item">
                <div data-lang-ru="–ñ–∏—Ä—ã" data-lang-en="Fats">–ñ–∏—Ä—ã</div>
                <div class="result-value" id="fats-result">0</div>
                <div data-lang-ru="–≥—Ä–∞–º–º/–¥–µ–Ω—å" data-lang-en="grams/day">–≥—Ä–∞–º–º/–¥–µ–Ω—å</div>
            </div>
            
            <div class="result-item">
                <div data-lang-ru="–£–≥–ª–µ–≤–æ–¥—ã" data-lang-en="Carbohydrates">–£–≥–ª–µ–≤–æ–¥—ã</div>
                <div class="result-value" id="carbs-result">0</div>
                <div data-lang-ru="–≥—Ä–∞–º–º/–¥–µ–Ω—å" data-lang-en="grams/day">–≥—Ä–∞–º–º/–¥–µ–Ω—å</div>
            </div>
            
            <div class="meal-plan">
                <h3 data-lang-ru="–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–∏–µ–º–∞–º –ø–∏—â–∏" data-lang-en="Recommended meal distribution">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–∏–µ–º–∞–º –ø–∏—â–∏</h3>
                <div id="meals-distribution"></div>
            </div>
            
            <button class="btn" id="back-to-calc-btn" data-lang-ru="–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ä–∞—Å—á–µ—Ç—É" data-lang-en="Back to calculator">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ä–∞—Å—á–µ—Ç—É</button>
        </div>
    </div>
    
    <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é -->
    <div class="side-menu" id="side-menu">
        <div class="menu-item" id="account-menu-item">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/user.png" alt="–ü—Ä–æ—Ñ–∏–ª—å">
            <span data-lang-ru="–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç" data-lang-en="Account">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</span>
        </div>
        <div class="menu-item" id="calculator-menu-item">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/calculator.png" alt="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä">
            <span data-lang-ru="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä" data-lang-en="Calculator">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</span>
        </div>
        <div class="menu-item" id="settings-menu-item">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/settings.png" alt="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
            <span data-lang-ru="–ù–∞—Å—Ç—Ä–æ–π–∫–∏" data-lang-en="Settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
        </div>
        <div class="menu-item" id="smart-calc-menu-item">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/artificial-intelligence.png" alt="–£–º–Ω—ã–π —Ä–∞—Å—á–µ—Ç">
            <span data-lang-ru="–£–º–Ω—ã–π —Ä–∞—Å—á–µ—Ç" data-lang-en="Smart calculation">–£–º–Ω—ã–π —Ä–∞—Å—á–µ—Ç</span>
        </div>
    </div>
    
    <!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é -->
    <div class="menu-overlay" id="menu-overlay"></div>
    <script>
    // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
    const pages = {
        main: document.getElementById('main-page'),
        account: document.getElementById('account-page'),
        settings: document.getElementById('settings-page'),
        calculatorChoice: document.getElementById('calculator-choice-page'),
        manualCalc: document.getElementById('manual-calc-page'),
        smartCalc: document.getElementById('smart-calc-page'),
        result: document.getElementById('result-page'),
    readyMeals: document.getElementById('ready-meals-page'),
    userProfile: document.getElementById('user-profile-page'),
        recover: document.getElementById('recover-page'),
        register: document.getElementById('register-page'),

    register: document.getElementById('register-page'),};
    
    const menuBtn = document.getElementById('menu-btn');
    const backBtn = document.getElementById('back-btn');
    const refreshBtn = document.getElementById('refresh-btn');
    const sideMenu = document.getElementById('side-menu');
    const menuOverlay = document.getElementById('menu-overlay');
    
    // –≠–ª–µ–º–µ–Ω—Ç—ã –º–µ–Ω—é
    const menuItems = {
        account: document.getElementById('account-menu-item'),
        calculator: document.getElementById('calculator-menu-item'),
        settings: document.getElementById('settings-menu-item'),
        smartCalc: document.getElementById('smart-calc-menu-item')
    };
    
    // –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
    const loginForm = document.getElementById('login-form');
    const registerBtn = document.getElementById('register-btn');
    const forgotPasswordBtn = document.getElementById('forgot-password');
    
    // –≠–ª–µ–º–µ–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫ —è–∑—ã–∫–∞
    const langRuBtn = document.getElementById('lang-ru');
    const langEnBtn = document.getElementById('lang-en');
    const htmlLang = document.getElementById('html-lang');
    
    // –≠–ª–µ–º–µ–Ω—Ç—ã –≤—ã–±–æ—Ä–∞ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
    const manualCalculatorBtn = document.getElementById('manual-calculator');
    const readyMealsCalculatorBtn = document.getElementById('ready-meals-calculator');
    
    // –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º—ã —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞
    const productSearch = document.getElementById('product-search');
    const searchResults = document.getElementById('search-results');
    const productWeight = document.getElementById('product-weight');
    const manualCalories = document.getElementById('manual-calories');
    const manualProteins = document.getElementById('manual-proteins');
    const manualFats = document.getElementById('manual-fats');
    const manualCarbs = document.getElementById('manual-carbs');
    const addProductBtn = document.getElementById('add-product-btn');
    const clearProductsBtn = document.getElementById('clear-products-btn');
    const productsList = document.getElementById('products-list');
    const totalCalories = document.getElementById('total-calories');
    const totalProteins = document.getElementById('total-proteins');
    const totalFats = document.getElementById('total-fats');
    const totalCarbs = document.getElementById('total-carbs');
    
    // –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º—ã —É–º–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞
    const femaleOption = document.getElementById('female-option');
    const maleOption = document.getElementById('male-option');
    const ageInput = document.getElementById('age-input');
    const heightInput = document.getElementById('height-input');
    const weightInput = document.getElementById('weight-input');
    const lowActivity = document.getElementById('low-activity');
    const mediumActivity = document.getElementById('medium-activity');
    const highActivity = document.getElementById('high-activity');
    const loseWeight = document.getElementById('lose-weight');
    const maintainWeight = document.getElementById('maintain-weight');
    const gainWeight = document.getElementById('gain-weight');
    const harrisFormula = document.getElementById('harris-formula');
    const mifflinFormula = document.getElementById('mifflin-formula');
    const calculateBtn = document.getElementById('calculate-btn');
    const mealOptions = document.querySelectorAll('.meal-option');
    const backToCalcBtn = document.getElementById('back-to-calc-btn');
    
    // –≠–ª–µ–º–µ–Ω—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    const caloriesResult = document.getElementById('calories-result');
    const proteinsResult = document.getElementById('proteins-result');
    const fatsResult = document.getElementById('fats-result');
    const carbsResult = document.getElementById('carbs-result');
    const mealsDistribution = document.getElementById('meals-distribution');
    
    // –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–µ—â–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
    const pageHistory = ['main'];
    
    // –¢–µ–∫—É—â–∏–π —è–∑—ã–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä—É—Å—Å–∫–∏–π)
    let currentLanguage = 'ru';
    // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–µ–º–æ–≤ –ø–∏—â–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3)
    let mealsPerDay = 3;
    
    // –¢–µ–∫—É—â–∏–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç
    let selectedProduct = null;
    // –°–ø–∏—Å–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
    let addedProducts = [];
    
    // –¢–∞–π–º–µ—Ä –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
    let searchTimer = null;
    
    // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
    function showPage(pageId) {
        // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        Object.values(pages).forEach(page => {
            page.classList.remove('active');
        });
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
        pages[pageId].classList.add('active');
        
        // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
        if (pageHistory[pageHistory.length - 1] !== pageId) {
            pageHistory.push(pageId);
        }
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–Ω –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü (—Ç–æ–ª—å–∫–æ –≥—Ä–∞–¥–∏–µ–Ω—Ç –¥–ª—è –≤—Å–µ—Ö, –∫—Ä–æ–º–µ –≥–ª–∞–≤–Ω–æ–π)
        if (pageId !== 'main') {
            document.body.style.background = 'linear-gradient(to bottom, #38cd17, #CDDC39)';
        }
    }
    
    // –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞–∑–∞–¥
    function goBack() {
        if (pageHistory.length > 1) {
            pageHistory.pop();
            const prevPage = pageHistory[pageHistory.length - 1];
            showPage(prevPage);
        }
    }
    
    // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω)
    function refreshPage() {
        showPage('main');
        // –û—á–∏—â–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –∏ –¥–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
        pageHistory.length = 0;
        pageHistory.push('main');
    }
    
    // –§—É–Ω–∫—Ü–∏—è —Å–º–µ–Ω—ã —è–∑—ã–∫–∞
    function changeLanguage(lang) {
        currentLanguage = lang;
        htmlLang.setAttribute('lang', lang);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ data-lang-ru –∏ data-lang-en
        document.querySelectorAll('[data-lang-ru], [data-lang-en]').forEach(el => {
            const text = el.getAttribute(`data-lang-${lang}`);
            if (text) el.textContent = text;
        });
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –¥–ª—è –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
        document.querySelectorAll('input[data-lang-ru-placeholder]').forEach(input => {
            const placeholder = input.getAttribute(`data-lang-${lang}-placeholder`);
            if (placeholder) input.placeholder = placeholder;
        });
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
        if (lang === 'ru') {
            langRuBtn.classList.add('selected');
            langEnBtn.classList.remove('selected');
        } else {
            langEnBtn.classList.add('selected');
            langRuBtn.classList.remove('selected');
        }
        
        // –ï—Å–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –æ–±–Ω–æ–≤–ª—è–µ–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–∏–µ–º–∞–º –ø–∏—â–∏
        if (pages.result.classList.contains('active')) {
            generateMealDistribution(
                parseInt(caloriesResult.textContent),
                parseInt(proteinsResult.textContent),
                parseInt(fatsResult.textContent),
                parseInt(carbsResult.textContent)
            );
        }
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞
    function selectGender(gender) {
        femaleOption.classList.remove('selected');
        maleOption.classList.remove('selected');
        if (gender === 'female') {
            femaleOption.classList.add('selected');
        } else {
            maleOption.classList.add('selected');
        }
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ —É—Ä–æ–≤–Ω—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
    function selectActivity(level) {
        lowActivity.classList.remove('selected');
        mediumActivity.classList.remove('selected');
        highActivity.classList.remove('selected');
        document.getElementById(level).classList.add('selected');
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ü–µ–ª–∏
    function selectGoal(goal) {
        loseWeight.classList.remove('selected');
        maintainWeight.classList.remove('selected');
        gainWeight.classList.remove('selected');
        document.getElementById(goal).classList.add('selected');
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–æ—Ä–º—É–ª—ã
    function selectFormula(formula) {
        harrisFormula.classList.remove('selected');
        mifflinFormula.classList.remove('selected');
        document.getElementById(formula).classList.add('selected');
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–∏–µ–º–æ–≤ –ø–∏—â–∏
    function selectMeals(meals) {
        mealOptions.forEach(option => {
            option.classList.remove('selected');
            if (option.getAttribute('data-meals') === meals) {
                option.classList.add('selected');
                mealsPerDay = parseInt(meals);
            }
        });
    }
    
    // –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ –∫–∞–ª–æ—Ä–∏–π –∏ –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤
    function calculateCalories() {
        const gender = femaleOption.classList.contains('selected') ? 'female' : 'male';
        const age = parseInt(ageInput.value) || 0;
        const height = parseInt(heightInput.value) || 0;
        const weight = parseInt(weightInput.value) || 0;
        const activity = lowActivity.classList.contains('selected') ? 'low' : 
                        mediumActivity.classList.contains('selected') ? 'medium' : 'high';
        const goal = loseWeight.classList.contains('selected') ? 'lose' : 
                    maintainWeight.classList.contains('selected') ? 'maintain' : 'gain';
        const formula = harrisFormula.classList.contains('selected') ? 'harris' : 'mifflin';
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        if (age < 10 || age > 120) {
            alert(currentLanguage === 'ru' ? '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç (10-120 –ª–µ—Ç)' : 'Please enter a valid age (10-120 years)');
            return;
        }
        
        if (height < 100 || height > 250) {
            alert(currentLanguage === 'ru' ? '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–æ—Å—Ç (100-250 —Å–º)' : 'Please enter a valid height (100-250 cm)');
            return;
        }
        
        if (weight < 30 || weight > 300) {
            alert(currentLanguage === 'ru' ? '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–µ—Å (30-300 –∫–≥)' : 'Please enter a valid weight (30-300 kg)');
            return;
        }
        
        // –†–∞—Å—á–µ—Ç –±–∞–∑–æ–≤–æ–≥–æ –º–µ—Ç–∞–±–æ–ª–∏–∑–º–∞ (BMR)
        let bmr;
        if (formula === 'harris') {
            if (gender === 'male') {
                bmr = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
            } else {
                bmr = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
            }
        } else { // Mifflin
            if (gender === 'male') {
                bmr = (10 * weight) + (6.25 * height) - (5 * age) + 5;
            } else {
                bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
            }
        }
        
        // –£—á–µ—Ç —É—Ä–æ–≤–Ω—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
        let activityFactor;
        switch(activity) {
            case 'low': activityFactor = 1.2; break;
            case 'medium': activityFactor = 1.55; break;
            case 'high': activityFactor = 1.9; break;
            default: activityFactor = 1.2;
        }
        
        let calories = bmr * activityFactor;
        
        // –£—á–µ—Ç —Ü–µ–ª–∏
        switch(goal) {
            case 'lose': calories *= 0.85; break; // –£–º–µ–Ω—å—à–∞–µ–º –Ω–∞ 15% –¥–ª—è –ø–æ—Ö—É–¥–µ–Ω–∏—è
            case 'gain': calories *= 1.15; break; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –Ω–∞ 15% –¥–ª—è –Ω–∞–±–æ—Ä–∞ –≤–µ—Å–∞
        }
        
        // –†–∞—Å—á–µ—Ç –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤ (–±–µ–ª–∫–∏, –∂–∏—Ä—ã, —É–≥–ª–µ–≤–æ–¥—ã)
        const proteins = Math.round((gender === 'male' ? weight * 2.2 : weight * 1.8));
        const fats = Math.round(calories * 0.25 / 9); // 25% –æ—Ç –∫–∞–ª–æ—Ä–∏–π, 9 –∫–∫–∞–ª/–≥ –∂–∏—Ä–∞
        const carbs = Math.round((calories - (proteins * 4) - (fats * 9)) / 4); // –û—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —É–≥–ª–µ–≤–æ–¥—ã
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        caloriesResult.textContent = Math.round(calories);
        proteinsResult.textContent = proteins;
        fatsResult.textContent = fats;
        carbsResult.textContent = Math.round(carbs);
        
        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–∏–µ–º–∞–º –ø–∏—â–∏
        generateMealDistribution(Math.round(calories), proteins, fats, Math.round(carbs));
        
        // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        showPage('result');
    }
    
    // –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ –ø—Ä–∏–µ–º–∞–º –ø–∏—â–∏
    function generateMealDistribution(calories, proteins, fats, carbs) {
        mealsDistribution.innerHTML = '';
        
        // –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–∞–ª–æ—Ä–∏–∏ –∏ –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç—ã –ø–æ –ø—Ä–∏–µ–º–∞–º –ø–∏—â–∏
        const meals = mealsPerDay;
        const caloriesPerMeal = Math.round(calories / meals);
        const proteinsPerMeal = Math.round(proteins / meals);
        const fatsPerMeal = Math.round(fats / meals);
        const carbsPerMeal = Math.round(carbs / meals);
        
        // –ù–∞–∑–≤–∞–Ω–∏—è –ø—Ä–∏–µ–º–æ–≤ –ø–∏—â–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
        const mealNames = {
            3: currentLanguage === 'ru' ? ['–ó–∞–≤—Ç—Ä–∞–∫', '–û–±–µ–¥', '–£–∂–∏–Ω'] : ['Breakfast', 'Lunch', 'Dinner'],
            4: currentLanguage === 'ru' ? ['–ó–∞–≤—Ç—Ä–∞–∫', '–ü–µ—Ä–µ–∫—É—Å', '–û–±–µ–¥', '–£–∂–∏–Ω'] : ['Breakfast', 'Snack', 'Lunch', 'Dinner'],
            5: currentLanguage === 'ru' ? ['–ó–∞–≤—Ç—Ä–∞–∫', '–ü–µ—Ä–µ–∫—É—Å', '–û–±–µ–¥', '–ü–µ—Ä–µ–∫—É—Å', '–£–∂–∏–Ω'] : ['Breakfast', 'Snack', 'Lunch', 'Snack', 'Dinner'],
            6: currentLanguage === 'ru' ? ['–ó–∞–≤—Ç—Ä–∞–∫', '–ü–µ—Ä–µ–∫—É—Å', '–û–±–µ–¥', '–ü–µ—Ä–µ–∫—É—Å', '–£–∂–∏–Ω', '–ü–µ—Ä–µ–∫—É—Å'] : ['Breakfast', 'Snack', 'Lunch', 'Snack', 'Dinner', 'Snack']
        };
        
        // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–µ–º–∞ –ø–∏—â–∏
        for (let i = 0; i < meals; i++) {
            const mealItem = document.createElement('div');
            mealItem.className = 'meal-item';
            
            const mealName = document.createElement('div');
            mealName.textContent = mealNames[meals][i];
            mealName.style.fontWeight = 'bold';
            mealName.style.marginBottom = '5px';
            
            const mealDetails = document.createElement('div');
            mealDetails.innerHTML = `
                ${currentLanguage === 'ru' ? '–ö–∞–ª–æ—Ä–∏–∏:' : 'Calories:'} ${caloriesPerMeal} <br>
                ${currentLanguage === 'ru' ? '–ë–µ–ª–∫–∏:' : 'Proteins:'} ${proteinsPerMeal} <br>
                ${currentLanguage === 'ru' ? '–ñ–∏—Ä—ã:' : 'Fats:'} ${fatsPerMeal} <br>
                ${currentLanguage === 'ru' ? '–£–≥–ª–µ–≤–æ–¥—ã:' : 'Carbs:'} ${carbsPerMeal} 
            `;
            
            mealItem.appendChild(mealName);
            mealItem.appendChild(mealDetails);
            mealsDistribution.appendChild(mealItem);
        }
    }

    // –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ Open Food Facts API
    async function searchProducts(query) {
        if (!query || query.length < 2) {
            searchResults.style.display = 'none';
            return;
        }

        try {
            // –ö–æ–¥–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å –¥–ª—è URL
            const encodedQuery = encodeURIComponent(query);
            const url = `https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodedQuery}&page_size=5&json=1`;
            
            const response = await fetch(url);
            const data = await response.json();
            
            displaySearchResults(data.products);
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤:', error);
            searchResults.innerHTML = currentLanguage === 'ru' 
                ? '<div class="product-item">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö</div>' 
                : '<div class="product-item">Error loading data</div>';
            searchResults.style.display = 'block';
        }
    }

    // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
    function displaySearchResults(products) {
        if (!products || products.length === 0) {
            searchResults.innerHTML = currentLanguage === 'ru' 
                ? '<div class="product-item">–ü—Ä–æ–¥—É–∫—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>' 
                : '<div class="product-item">No products found</div>';
            searchResults.style.display = 'block';
            return;
        }

        searchResults.innerHTML = '';
        products.forEach(product => {
            const productName = product.product_name || currentLanguage === 'ru' ? '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç' : 'Unknown product';
            const brand = product.brands || '';
            const calories = product.nutriments?.['energy-kcal_100g'] || 0;
            const proteins = product.nutriments?.['proteins_100g'] || 0;
            const fats = product.nutriments?.['fat_100g'] || 0;
            const carbs = product.nutriments?.['carbohydrates_100g'] || 0;

            const productElement = document.createElement('div');
            productElement.className = 'product-item';
            productElement.dataset.calories = calories;
            productElement.dataset.proteins = proteins;
            productElement.dataset.fats = fats;
            productElement.dataset.carbs = carbs;
            productElement.innerHTML = `
                <div class="product-name">${productName}</div>
                <div class="product-brand">${brand}</div>
                <div>${currentLanguage === 'ru' ? '–ö–∞–ª–æ—Ä–∏–∏:' : 'Calories:'} ${calories} –∫–∫–∞–ª</div>
            `;
            
            productElement.addEventListener('click', () => {
                selectedProduct = {
                    name: productName,
                    brand: brand,
                    calories: calories,
                    proteins: proteins,
                    fats: fats,
                    carbs: carbs
                };
                
                productSearch.value = productName;
                searchResults.style.display = 'none';
                updateManualNutrients();
            });
            
            searchResults.appendChild(productElement);
        });
        searchResults.style.display = 'block';
    }

    // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –ö–ë–ñ–£ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤–µ—Å–∞
    function updateManualNutrients() {
        if (!selectedProduct) return;
        
        const weight = parseFloat(productWeight.value) || 100;
        const weightRatio = weight / 100;
        
        manualCalories.textContent = Math.round(selectedProduct.calories * weightRatio);
        manualProteins.textContent = (selectedProduct.proteins * weightRatio).toFixed(1);
        manualFats.textContent = (selectedProduct.fats * weightRatio).toFixed(1);
        manualCarbs.textContent = (selectedProduct.carbs * weightRatio).toFixed(1);
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ –≤ —Å–ø–∏—Å–æ–∫
    function addProduct() {
        if (!selectedProduct) {
            alert(currentLanguage === 'ru' 
                ? '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç' 
                : 'Please select a product');
            return;
        }
        
        const weight = parseFloat(productWeight.value) || 100;
        const weightRatio = weight / 100;
        
        const productToAdd = {
            name: selectedProduct.name,
            brand: selectedProduct.brand,
            weight: weight,
            calories: Math.round(selectedProduct.calories * weightRatio),
            proteins: parseFloat((selectedProduct.proteins * weightRatio).toFixed(1)),
            fats: parseFloat((selectedProduct.fats * weightRatio).toFixed(1)),
            carbs: parseFloat((selectedProduct.carbs * weightRatio).toFixed(1))
        };
        
        addedProducts.push(productToAdd);
        updateProductsList();
        updateTotalNutrients();
    }

    // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
    function updateProductsList() {
        productsList.innerHTML = '';
        
        addedProducts.forEach((product, index) => {
            const productElement = document.createElement('div');
            productElement.className = 'added-product';
            productElement.innerHTML = `
                <div class="product-info">
                    <div><strong>${product.name}</strong>${product.brand ? ` (${product.brand})` : ''}</div>
                    <div>${product.weight}g: ${product.calories} –∫–∫–∞–ª</div>
                </div>
                <div class="product-actions">
                    <button class="delete-btn" data-index="${index}">‚úï</button>
                </div>
            `;
            
            productsList.appendChild(productElement);
        });
        
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è
        document.querySelectorAll('.delete-btn').forEach(button => {
            button.addEventListener('click', function() {
                const index = parseInt(this.dataset.index);
                addedProducts.splice(index, 1);
                updateProductsList();
                updateTotalNutrients();
            });
        });
    }

    // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏—Ç–æ–≥–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ö–ë–ñ–£
    function updateTotalNutrients() {
        let totalCal = 0;
        let totalProt = 0;
        let totalFat = 0;
        let totalCarb = 0;
        
        addedProducts.forEach(product => {
            totalCal += product.calories;
            totalProt += product.proteins;
            totalFat += product.fats;
            totalCarb += product.carbs;
        });
        
        totalCalories.textContent = totalCal;
        totalProteins.textContent = totalProt.toFixed(1);
        totalFats.textContent = totalFat.toFixed(1);
        totalCarbs.textContent = totalCarb.toFixed(1);
    }

    // –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
    function clearProducts() {
        addedProducts = [];
        updateProductsList();
        updateTotalNutrients();
    }

    
let isLoggedIn = false;


function secureShowPage(pageId) {
    const publicPages = ['main', 'account', 'recover', 'settings', 'register'];
    if (!isLoggedIn && !publicPages.includes(pageId)) {
        return; // silently deny access
    }
    showPage(pageId);
}

   
// –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –≤—ã–∑–æ–≤—ã –º–µ–Ω—é
Object.keys(menuItems).forEach(key => {
    menuItems[key].addEventListener('click', function () {
        secureShowPage(key === 'calculator' ? 'calculatorChoice' : key);
        sideMenu.classList.remove('open');
        menuOverlay.classList.remove('active');
    });
});

// –í—Ö–æ–¥



// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    menuBtn.addEventListener('click', function() {
        sideMenu.classList.toggle('open');
        menuOverlay.classList.toggle('active');
        this.classList.toggle('menu-animate');
        
        // –ê–Ω–∏–º–∞—Ü–∏—è –∏–∫–æ–Ω–∫–∏ –º–µ–Ω—é
        setTimeout(() => {
            this.classList.remove('menu-animate');
        }, 500);
    });
    
    menuOverlay.addEventListener('click', function() {
        sideMenu.classList.remove('open');
        this.classList.remove('active');
    });
    
    backBtn.addEventListener('click', goBack);
    refreshBtn.addEventListener('click', refreshPage);
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é
    menuItems.account.addEventListener('click', function() {
        showPage('account');
        sideMenu.classList.remove('open');
        menuOverlay.classList.remove('active');
    });
    
    menuItems.calculator.addEventListener('click', function() {
        showPage('calculatorChoice');
        sideMenu.classList.remove('open');
        menuOverlay.classList.remove('active');
    });
    
    menuItems.settings.addEventListener('click', function() {
        showPage('settings');
        sideMenu.classList.remove('open');
        menuOverlay.classList.remove('active');
    });
    
    menuItems.smartCalc.addEventListener('click', function() {
        showPage('smartCalc');
        sideMenu.classList.remove('open');
        menuOverlay.classList.remove('active');
    });
    
    
forgotPasswordBtn.addEventListener('click', function(e) {
    e.preventDefault();
    showPage('recover');
});




// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
    
    
    
    
    forgotPasswordBtn.addEventListener('click', function(e) {
        e.preventDefault();
        
    });
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ —è–∑—ã–∫–∞
    langRuBtn.addEventListener('click', function() {
        changeLanguage('ru');
    });
    
    langEnBtn.addEventListener('click', function() {
        changeLanguage('en');
    });
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
    manualCalculatorBtn.addEventListener('click', function() {
        showPage('manualCalc');
    });
    
    readyMealsCalculatorBtn.addEventListener('click', function() {
        showPage('readyMeals');
    });
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ñ–æ—Ä–º—ã —É–º–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞
    femaleOption.addEventListener('click', function() {
        selectGender('female');
    });
    
    maleOption.addEventListener('click', function() {
        selectGender('male');
    });
    
    lowActivity.addEventListener('click', function() {
        selectActivity('low-activity');
    });
    
    mediumActivity.addEventListener('click', function() {
        selectActivity('medium-activity');
    });
    
    highActivity.addEventListener('click', function() {
        selectActivity('high-activity');
    });
    
    loseWeight.addEventListener('click', function() {
        selectGoal('lose-weight');
    });
    
    maintainWeight.addEventListener('click', function() {
        selectGoal('maintain-weight');
    });
    
    gainWeight.addEventListener('click', function() {
        selectGoal('gain-weight');
    });
    
    harrisFormula.addEventListener('click', function() {
        selectFormula('harris-formula');
    });
    
    mifflinFormula.addEventListener('click', function() {
        selectFormula('mifflin-formula');
    });
    
    mealOptions.forEach(option => {
        option.addEventListener('click', function() {
            selectMeals(this.getAttribute('data-meals'));
        });
    });
    
    calculateBtn.addEventListener('click', calculateCalories);
    
    backToCalcBtn.addEventListener('click', function() {
        showPage('smartCalc');
    });
    
    
    const backToReadyMealsBtn = document.getElementById('back-to-calculator-choice');
    if (backToReadyMealsBtn) {
        backToReadyMealsBtn.addEventListener('click', function () {
            showPage('calculatorChoice');
        });
    }


    
    const backToMainFromProfileBtn = document.getElementById('back-to-main-from-profile');
    if (backToMainFromProfileBtn) {
        backToMainFromProfileBtn.addEventListener('click', function () {
            showPage('main');
        });
    }


    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞
    productSearch.addEventListener('input', function() {
        clearTimeout(searchTimer);
        searchTimer = setTimeout(() => {
            searchProducts(this.value.trim());
        }, 300);
    });
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –æ–±–ª–∞—Å—Ç–∏
    document.addEventListener('click', function(e) {
        if (!productSearch.contains(e.target)) {
            searchResults.style.display = 'none';
        }
    });
    
    productWeight.addEventListener('input', updateManualNutrients);
    
    addProductBtn.addEventListener('click', addProduct);
    
    clearProductsBtn.addEventListener('click', clearProducts);
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    document.addEventListener('DOMContentLoaded', function() {
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        changeLanguage('ru');
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ñ–æ—Ä–º—ã —Ä–∞—Å—á–µ—Ç–∞
        ageInput.value = '25';
        heightInput.value = '170';
        weightInput.value = '70';
        
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞
        updateManualNutrients();
    
    const recoverForm = document.getElementById('recover-form');
    if (recoverForm) {
        recoverForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('recover-username').value.trim();
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;

            if (newPassword !== confirmPassword) {
                alert(currentLanguage === 'ru' ? '–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç' : 'Passwords do not match');
                return;
            }

            if (!username || !newPassword) {
                alert(currentLanguage === 'ru' ? '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è' : 'Please fill all fields');
                return;
            }

            
            showPage('account-page');
        });
    }


    const registerForm = document.getElementById('register-form');
    if (registerForm) {
        registerForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('register-username').value.trim();
            const password = document.getElementById('register-password').value;
            const confirm = document.getElementById('register-confirm').value;

            if (!username || !password || !confirm) return;
            if (password !== confirm) return;

            showPage('account-page');
        });
    }

    const registerBtn = document.getElementById('register-btn');
    if (registerBtn) {
        registerBtn.addEventListener('click', function(e) {
            e.preventDefault();
            showPage('register');
        });
    }


    loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        isLoggedIn = true;
        showPage('main');
    });

});
</script>
</body>
</html>
