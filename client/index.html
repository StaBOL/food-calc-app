<!DOCTYPE html>
<html lang="ru" id="html-lang">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Считайте калории где угодно!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        
        body {
            min-height: 100vh;
            color: white;
            transition: all 0.5s;
            overflow-x: hidden;
        }
        
        /* Общие стили для всех страниц */
        .page {
            display: none;
            position: absolute;
            top: 0px;
            left: 0;
            width: 100%;
            height: calc(100% - 0px);
            padding: 250px;
        }
        
        .page.active {
            display: block;
        }
        
        /* Главная страница */
        .main-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            min-height: calc(100vh - 0px);
        }
        
        .main-title {
            font-size: 36px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .account-page {
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            min-height: calc(100vh - 60px);
        }

        .settings-page {
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            min-height: calc(100vh - 60px);
        }

        .calculator-choice-page {
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            min-height: calc(100vh - 60px);
        }

        .smart-calc-page {
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            min-height: calc(100vh - 60px);
        }

        .result-page {
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            
        }

        .manual-calc-page {
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            min-height: calc(100vh - 60px);
        }

        .user-profile-page {
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            min-height: calc(100vh - 60px);
        }

        .ready-meals-page {
            text-align: center;
            background: linear-gradient(to bottom, #38cd17, #CDDC39);
            min-height: calc(100vh - 60px);
        }

        /* Общие стили для контентных блоков */
        .content-box {
            background-color: rgba(0, 0, 0, 0.7);
            width: 100%;
            max-width: 500px;
            margin: 20px auto;
            padding: 20px;
            border-radius: 10px;
            box-sizing: border-box;
            position: relative;
        }
        
        .option {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            margin: 10px 0;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .option:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .option.selected {
            background: rgba(255,255,255,0.3);
            border: 1px solid white;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: rgba(0, 0, 0, 0.2);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 100;
            height: 60px;
        }
        
        .header-icons {
            display: flex;
            gap: 15px;
        }
        
        .header-icons img {
            width: 24px;
            height: 24px;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .header-icons img:hover {
            transform: scale(1.1);
        }
        
        .logo {
            font-weight: bold;
            font-size: 20px;
            color: #DFFF00;
        }
        
        .logo span {
            color: white;
        }
        
        /* Боковое меню */
        .side-menu {
            position: fixed;
            top: 0;
            left: -250px;
            width: 250px;
            height: 100%;
            background: #1e871e;
            color: white;
            padding: 20px;
            box-shadow: 2px 0 10px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            z-index: 1000;
            opacity: 0;
        }
        
        .side-menu.open {
            left: 0;
            opacity: 1;
        }
        
        .menu-item {
            margin: 20px 0;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            padding: 8px;
            border-radius: 5px;
            transition: background 0.3s;
        }
        
        .menu-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .menu-item img {
            width: 24px;
            height: 24px;
        }
        
        /* Оверлей для закрытия меню */
        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }
        
        .menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        /* Стили для формы */
        .form-group {
            margin: 15px 0;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            text-align: left;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: none;
            border-radius: 5px;
            background: rgba(255,255,255,0.9);
            font-size: 16px;
        }
        
        .btn {
            background: #DFFF00;
            color: #1e871e;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: background 0.3s;
            font-size: 16px;
            width: 100%;
        }
        
        .btn:hover {
            background: #CDDC39;
        }
        
        .link {
            color: white;
            text-decoration: none;
            font-size: 14px;
            display: inline-block;
            margin: 10px 5px;
            transition: color 0.3s;
        }
        
        .link:hover {
            color: #DFFF00;
            text-decoration: underline;
        }
        
        /* Стили для формы умного расчета */
        .gender-selection {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .gender-option {
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            text-align: center;
            margin: 0 5px;
        }
        
        .gender-option.selected {
            background: rgba(255,255,255,0.3);
            border: 1px solid white;
        }
        
        .selection-title {
            margin: 15px 0 10px;
            text-align: left;
        }
        
        .meals-per-day {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }
        
        .meal-option {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .meal-option.selected {
            background: rgba(255,255,255,0.3);
            border: 1px solid white;
            transform: scale(1.1);
        }
        
        /* Стили для страницы результатов */
        .result-item {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
        }
        
        .result-value {
            font-size: 28px;
            font-weight: bold;
            color: #DFFF00;
            margin: 10px 0;
        }
        
        .meal-plan {
            margin-top: 25px;
            text-align: left;
        }
        
        .meal-item {
            padding: 12px;
            margin: 8px 0;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
        }
        
        /* Стили для ручного ввода */
        .search-results {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
            border-radius: 5px;
            background: rgba(255,255,255,0.1);
        }
        
        .product-item {
            padding: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .product-item:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .product-name {
            font-weight: bold;
        }
        
        .product-brand {
            font-size: 12px;
            color: #ccc;
        }
        
        .nutrients-row {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .nutrient {
            flex: 1;
            text-align: center;
            padding: 5px;
            background: rgba(0,0,0,0.3);
            border-radius: 3px;
            margin: 0 2px;
        }
        
        .nutrient-value {
            font-weight: bold;
            color: #DFFF00;
        }
        
        /* Стили для списка добавленных продуктов */
        .added-product {
            padding: 10px;
            margin: 10px 0;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .product-info {
            flex: 1;
            text-align: left;
        }
        
        .product-actions {
            display: flex;
            gap: 10px;
        }
        
        .delete-btn {
            background: #ff5252;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
        }
        
        /* Анимация иконки меню */
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .menu-animate {
            animation: bounce 0.5s;
        }
        
        /* Адаптивные стили */
        @media (max-width: 480px) {
            .main-title {
                font-size: 28px;
            }
            
            .content-box {
                padding: 15px;
            }
            
            .option {
                padding: 12px;
            }
            
            .gender-option {
                padding: 10px 15px;
                font-size: 14px;
            }
            
            .page {
                padding: 100px 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Общий header для всех страниц -->
    <header>
        <div class="header-icons">
            <img id="back-btn" src="https://img.icons8.com/ios-filled/50/ffffff/back.png" alt="Назад">
            <img id="refresh-btn" src="https://img.icons8.com/ios-filled/50/ffffff/synchronize.png" alt="Обновить">
            <img id="menu-btn" src="https://img.icons8.com/ios-filled/50/ffffff/menu.png" alt="Меню">
        </div>
        <div class="logo">FOOD & <span>CALCULATE</span></div>
    </header>
    
    <!-- Главная страница -->
    <div class="page main-page active" id="main-page">
        <h1 class="main-title" data-lang-ru="Считайте калории где угодно!" data-lang-en="Count calories anywhere!">Считайте калории где угодно!</h1>
        <div class="content-box">
            <p data-lang-ru="Начните работу с приложением, выбрав нужный раздел в боковом меню" data-lang-en="Start using the app by selecting a section in the side menu">
                Начните работу с приложением, выбрав нужный раздел в меню
            </p>
        </div>
    </div>
    
    <!-- Страница личного кабинета -->
    <div class="page account-page" id="account-page">
        <div class="content-box">
            <h2 data-lang-ru="Вход" data-lang-en="Login">Вход</h2>
            <form id="login-form">
                <div class="form-group">
                    <input type="text" placeholder="Имя аккаунта" data-lang-ru-placeholder="Имя аккаунта" data-lang-en-placeholder="Account name" required>
                </div>
                <div class="form-group">
                    <input type="password" placeholder="Пароль" data-lang-ru-placeholder="Пароль" data-lang-en-placeholder="Password" required>
                </div>
                <button type="submit" class="btn" data-lang-ru="Войти" data-lang-en="Sign In">Войти</button>
                <div style="text-align: center; margin-top: 15px;">
                    <a href="#" class="link" id="forgot-password" data-lang-ru="Забыли пароль" data-lang-en="Forgot password">Забыли пароль</a>
                    <a href="#" class="link" id="register-btn" data-lang-ru="Регистрация" data-lang-en="Register">Регистрация</a>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Страница настроек -->
    <div class="page settings-page" id="settings-page">
        <div class="content-box">
            <h2 data-lang-ru="Настройки" data-lang-en="Settings">Настройки</h2>
            <h3 class="selection-title" data-lang-ru="Язык приложения" data-lang-en="App language">Язык приложения</h3>
            <div class="option selected" id="lang-ru">
                <span data-lang-ru="Русский" data-lang-en="Russian">Русский</span>
                <span>🇷🇺</span>
            </div>
            <div class="option" id="lang-en">
                <span data-lang-ru="Английский" data-lang-en="English">Английский</span>
                <span>🇬🇧</span>
            </div>
        </div>
    </div>
    
    <!-- Страница выбора калькулятора -->
    <div class="page calculator-choice-page" id="calculator-choice-page">
        <div class="content-box">
            <h2 data-lang-ru="Выберите тип калькулятора" data-lang-en="Choose calculator type">Выберите тип калькулятора</h2>
            <div class="option" id="manual-calculator">
                <img src="https://img.icons8.com/ios-filled/50/ffffff/edit--v1.png" alt="Ручной ввод">
                <span data-lang-ru="Ручной расчет" data-lang-en="Manual calculation">Ручной расчет</span>
            </div>
            <div class="option" id="ready-meals-calculator">
                <img src="https://img.icons8.com/ios-filled/50/ffffff/meal.png" alt="Готовые блюда">
                <span data-lang-ru="Готовые блюда" data-lang-en="Ready meals">Готовые блюда</span>
            </div>
        </div>
    </div>
    
    <!-- Страница ручного ввода -->
    <div class="page manual-calc-page" id="manual-calc-page">
        <div class="content-box">
            <h2 data-lang-ru="Ручной расчет калорий" data-lang-en="Manual calories calculation">Ручной расчет калорий</h2>
            
            <div class="form-group">
                <label data-lang-ru="Название продукта" data-lang-en="Product name">Название продукта</label>
                <input type="text" id="product-search" placeholder="Начните вводить название" 
                       data-lang-ru-placeholder="Начните вводить название" 
                       data-lang-en-placeholder="Start typing product name">
                <div class="search-results" id="search-results" style="display: none;"></div>
            </div>
            
            <div class="form-group">
                <label data-lang-ru="Вес продукта (г)" data-lang-en="Product weight (g)">Вес продукта (г)</label>
                <input type="number" id="product-weight" min="1" max="10000" value="100">
            </div>
            
            <div class="nutrients-row">
                <div class="nutrient">
                    <div data-lang-ru="Калории" data-lang-en="Calories">Калории</div>
                    <div class="nutrient-value" id="manual-calories">0</div>
                    <div>ккал</div>
                </div>
                <div class="nutrient">
                    <div data-lang-ru="Белки" data-lang-en="Proteins">Белки</div>
                    <div class="nutrient-value" id="manual-proteins">0</div>
                    <div>г</div>
                </div>
                <div class="nutrient">
                    <div data-lang-ru="Жиры" data-lang-en="Fats">Жиры</div>
                    <div class="nutrient-value" id="manual-fats">0</div>
                    <div>г</div>
                </div>
                <div class="nutrient">
                    <div data-lang-ru="Углеводы" data-lang-en="Carbs">Углеводы</div>
                    <div class="nutrient-value" id="manual-carbs">0</div>
                    <div>г</div>
                </div>
            </div>
            
            <button class="btn" id="add-product-btn" data-lang-ru="Добавить продукт" data-lang-en="Add product">Добавить продукт</button>
            <button class="btn" id="clear-products-btn" data-lang-ru="Очистить список" data-lang-en="Clear list">Очистить список</button>
            
            <div id="products-list" style="margin-top: 20px; text-align: left;"></div>
            
            <div class="nutrients-row" style="margin-top: 20px;">
                <div class="nutrient">
                    <div data-lang-ru="Итого калории" data-lang-en="Total calories">Итого калории</div>
                    <div class="nutrient-value" id="total-calories">0</div>
                    <div>ккал</div>
                </div>
                <div class="nutrient">
                    <div data-lang-ru="Итого белки" data-lang-en="Total proteins">Итого белки</div>
                    <div class="nutrient-value" id="total-proteins">0</div>
                    <div>г</div>
                </div>
                <div class="nutrient">
                    <div data-lang-ru="Итого жиры" data-lang-en="Total fats">Итого жиры</div>
                    <div class="nutrient-value" id="total-fats">0</div>
                    <div>г</div>
                </div>
                <div class="nutrient">
                    <div data-lang-ru="Итого углеводы" data-lang-en="Total carbs">Итого углеводы</div>
                    <div class="nutrient-value" id="total-carbs">0</div>
                    <div>г</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Страница умного расчета -->
    <div class="page smart-calc-page" id="smart-calc-page">
        <div class="content-box">
            <h2 data-lang-ru="Умный расчет калорий" data-lang-en="Smart calories calculation">Умный расчет калорий</h2>
            
            <div class="gender-selection">
                <div class="gender-option selected" id="female-option">
                    <span data-lang-ru="Женщина" data-lang-en="Female">Женщина</span>
                </div>
                <div class="gender-option" id="male-option">
                    <span data-lang-ru="Мужчина" data-lang-en="Male">Мужчина</span>
                </div>
            </div>
            
            <div class="form-group">
                <label data-lang-ru="Возраст, лет" data-lang-en="Age, years">Возраст, лет</label>
                <input type="number" id="age-input" min="10" max="120">
            </div>
            
            <div class="form-group">
                <label data-lang-ru="Рост, см" data-lang-en="Height, cm">Рост, см</label>
                <input type="number" id="height-input" min="100" max="250">
            </div>
            
            <div class="form-group">
                <label data-lang-ru="Вес, кг" data-lang-en="Weight, kg">Вес, кг</label>
                <input type="number" id="weight-input" min="30" max="300">
            </div>
            
            <h3 class="selection-title" data-lang-ru="Дневная активность" data-lang-en="Daily activity">Дневная активность</h3>
            <div class="option selected" id="low-activity">
                <span data-lang-ru="Низкая (ходьба, недолгие прогулки)" data-lang-en="Low (walking, short walks)">Низкая (ходьба, недолгие прогулки)</span>
            </div>
            <div class="option" id="medium-activity">
                <span data-lang-ru="Средняя (тренировки 3-5 раз в неделю)" data-lang-en="Medium (workouts 3-5 times a week)">Средняя (тренировки 3-5 раз в неделю)</span>
            </div>
            <div class="option" id="high-activity">
                <span data-lang-ru="Высокая (интенсивные тренировки ежедневно)" data-lang-en="High (intensive daily workouts)">Высокая (интенсивные тренировки ежедневно)</span>
            </div>
            
            <h3 class="selection-title" data-lang-ru="Ваша цель" data-lang-en="Your goal">Ваша цель</h3>
            <div class="option selected" id="lose-weight">
                <span data-lang-ru="Сбросить вес" data-lang-en="Lose weight">Сбросить вес</span>
            </div>
            <div class="option" id="maintain-weight">
                <span data-lang-ru="Поддерживать вес" data-lang-en="Maintain weight">Поддерживать вес</span>
            </div>
            <div class="option" id="gain-weight">
                <span data-lang-ru="Набрать вес" data-lang-en="Gain weight">Набрать вес</span>
            </div>
            
            <h3 class="selection-title" data-lang-ru="Формула расчета" data-lang-en="Calculation formula">Формула расчета</h3>
            <div class="option selected" id="harris-formula">
                <span data-lang-ru="Харриса-Бенедикта" data-lang-en="Harris-Benedict">Харриса-Бенедикта</span>
            </div>
            <div class="option" id="mifflin-formula">
                <span data-lang-ru="Миффлина-Сан Жеора" data-lang-en="Mifflin-St Jeor">Миффлина-Сан Жеора</span>
            </div>
            
            <h3 class="selection-title" data-lang-ru="Количество приемов пищи в день" data-lang-en="Number of meals per day">Количество приемов пищи в день</h3>
            <div class="meals-per-day">
                <div class="meal-option selected" data-meals="3">3</div>
                <div class="meal-option" data-meals="4">4</div>
                <div class="meal-option" data-meals="5">5</div>
                <div class="meal-option" data-meals="6">6</div>
            </div>
            
            <button class="btn" id="calculate-btn" data-lang-ru="Рассчитать" data-lang-en="Calculate">Рассчитать</button>
        </div>
    </div>
    
    
    <!-- Страница готовых ПП-блюд -->
    <div class="page ready-meals-page" id="ready-meals-page">
        <div class="content-box">
            <h2 data-lang-ru="Готовые ПП-блюда" data-lang-en="Healthy Meals">Готовые ПП-блюда</h2>

            <div class="meal-item">
                <strong>Овсянка с ягодами</strong><br>
                Калории: 250 ккал<br>Белки: 8 г | Жиры: 5 г | Углеводы: 40 г
            </div>
            <div class="meal-item">
                <strong>Куриная грудка с гречкой и овощами</strong><br>
                Калории: 350 ккал<br>Белки: 30 г | Жиры: 8 г | Углеводы: 35 г
            </div>
            <div class="meal-item">
                <strong>Салат с тунцом и яйцом</strong><br>
                Калории: 280 ккал<br>Белки: 22 г | Жиры: 15 г | Углеводы: 10 г
            </div>
            <div class="meal-item">
                <strong>Овощное рагу с чечевицей</strong><br>
                Калории: 320 ккал<br>Белки: 18 г | Жиры: 6 г | Углеводы: 45 г
            </div>

            <button class="btn" id="back-to-calculator-choice" data-lang-ru="Назад" data-lang-en="Back">Назад</button>
        </div>
    </div>


    
    
<!-- Страница восстановления пароля -->
<div class="page account-page" id="recover-page">
    <div class="content-box">
        <h2 data-lang-ru="Восстановление пароля" data-lang-en="Password Recovery">Восстановление пароля</h2>
        <form id="recover-form">
            <div class="form-group">
                <input type="text" id="recover-username" placeholder="Имя аккаунта" required>
            </div>
            <div class="form-group">
                <input type="password" id="new-password" placeholder="Новый пароль" required>
            </div>
            <div class="form-group">
                <input type="password" id="confirm-password" placeholder="Повторите пароль" required>
            </div>
            <button type="submit" class="btn" data-lang-ru="Сбросить пароль" data-lang-en="Reset Password">Сбросить пароль</button>
        </form>
    </div>
</div>


<!-- Страница регистрации -->
<div class="page account-page" id="register-page">
    <div class="content-box">
        <h2 data-lang-ru="Регистрация" data-lang-en="Registration">Регистрация</h2>
        <form id="register-form">
            <div class="form-group">
                <input type="text" id="register-username" placeholder="Имя аккаунта" required>
            </div>
            <div class="form-group">
                <input type="password" id="register-password" placeholder="Пароль" required>
            </div>
            <div class="form-group">
                <input type="password" id="register-confirm" placeholder="Повторите пароль" required>
            </div>
            <button type="submit" class="btn" data-lang-ru="Зарегистрироваться" data-lang-en="Register">Зарегистрироваться</button>
        </form>
    </div>
</div>

<!-- Страница пользователя после регистрации -->
    <div class="page user-profile-page" id="user-profile-page">
        <div class="content-box">
            <h2 data-lang-ru="Профиль пользователя" data-lang-en="User Profile">Профиль пользователя</h2>
            <p data-lang-ru="Добро пожаловать в ваш личный кабинет!" data-lang-en="Welcome to your personal dashboard!">
                Добро пожаловать в ваш личный кабинет!
            </p>
            <button class="btn" id="back-to-main-from-profile" data-lang-ru="На главную" data-lang-en="To main">На главную</button>
        </div>
    </div>


    <!-- Страница результатов -->
    <div class="page result-page" id="result-page">
        <div class="content-box">
            <h2 data-lang-ru="Результаты расчета" data-lang-en="Calculation results">Результаты расчета</h2>
            
            <div class="result-item">
                <div data-lang-ru="Рекомендуемая норма калорий" data-lang-en="Recommended calorie intake">Рекомендуемая норма калорий</div>
                <div class="result-value" id="calories-result">0</div>
                <div data-lang-ru="ккал/день" data-lang-en="kcal/day">ккал/день</div>
            </div>
            
            <div class="result-item">
                <div data-lang-ru="Белки" data-lang-en="Proteins">Белки</div>
                <div class="result-value" id="proteins-result">0</div>
                <div data-lang-ru="грамм/день" data-lang-en="grams/day">грамм/день</div>
            </div>
            
            <div class="result-item">
                <div data-lang-ru="Жиры" data-lang-en="Fats">Жиры</div>
                <div class="result-value" id="fats-result">0</div>
                <div data-lang-ru="грамм/день" data-lang-en="grams/day">грамм/день</div>
            </div>
            
            <div class="result-item">
                <div data-lang-ru="Углеводы" data-lang-en="Carbohydrates">Углеводы</div>
                <div class="result-value" id="carbs-result">0</div>
                <div data-lang-ru="грамм/день" data-lang-en="grams/day">грамм/день</div>
            </div>
            
            <div class="meal-plan">
                <h3 data-lang-ru="Рекомендуемое распределение по приемам пищи" data-lang-en="Recommended meal distribution">Рекомендуемое распределение по приемам пищи</h3>
                <div id="meals-distribution"></div>
            </div>
            
            <button class="btn" id="back-to-calc-btn" data-lang-ru="Вернуться к расчету" data-lang-en="Back to calculator">Вернуться к расчету</button>
        </div>
    </div>
    
    <!-- Боковое меню -->
    <div class="side-menu" id="side-menu">
        <div class="menu-item" id="account-menu-item">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/user.png" alt="Профиль">
            <span data-lang-ru="Личный кабинет" data-lang-en="Account">Личный кабинет</span>
        </div>
        <div class="menu-item" id="calculator-menu-item">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/calculator.png" alt="Калькулятор">
            <span data-lang-ru="Калькулятор" data-lang-en="Calculator">Калькулятор</span>
        </div>
        <div class="menu-item" id="settings-menu-item">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/settings.png" alt="Настройки">
            <span data-lang-ru="Настройки" data-lang-en="Settings">Настройки</span>
        </div>
        <div class="menu-item" id="smart-calc-menu-item">
            <img src="https://img.icons8.com/ios-filled/50/ffffff/artificial-intelligence.png" alt="Умный расчет">
            <span data-lang-ru="Умный расчет" data-lang-en="Smart calculation">Умный расчет</span>
        </div>
    </div>
    
    <!-- Оверлей для закрытия меню -->
    <div class="menu-overlay" id="menu-overlay"></div>
    <script>
    // Элементы DOM
    const pages = {
        main: document.getElementById('main-page'),
        account: document.getElementById('account-page'),
        settings: document.getElementById('settings-page'),
        calculatorChoice: document.getElementById('calculator-choice-page'),
        manualCalc: document.getElementById('manual-calc-page'),
        smartCalc: document.getElementById('smart-calc-page'),
        result: document.getElementById('result-page'),
    readyMeals: document.getElementById('ready-meals-page'),
    userProfile: document.getElementById('user-profile-page'),
        recover: document.getElementById('recover-page'),
        register: document.getElementById('register-page'),

    register: document.getElementById('register-page'),};
    
    const menuBtn = document.getElementById('menu-btn');
    const backBtn = document.getElementById('back-btn');
    const refreshBtn = document.getElementById('refresh-btn');
    const sideMenu = document.getElementById('side-menu');
    const menuOverlay = document.getElementById('menu-overlay');
    
    // Элементы меню
    const menuItems = {
        account: document.getElementById('account-menu-item'),
        calculator: document.getElementById('calculator-menu-item'),
        settings: document.getElementById('settings-menu-item'),
        smartCalc: document.getElementById('smart-calc-menu-item')
    };
    
    // Элементы формы входа
    const loginForm = document.getElementById('login-form');
    const registerBtn = document.getElementById('register-btn');
    const forgotPasswordBtn = document.getElementById('forgot-password');
    
    // Элементы настроек языка
    const langRuBtn = document.getElementById('lang-ru');
    const langEnBtn = document.getElementById('lang-en');
    const htmlLang = document.getElementById('html-lang');
    
    // Элементы выбора калькулятора
    const manualCalculatorBtn = document.getElementById('manual-calculator');
    const readyMealsCalculatorBtn = document.getElementById('ready-meals-calculator');
    
    // Элементы формы ручного ввода
    const productSearch = document.getElementById('product-search');
    const searchResults = document.getElementById('search-results');
    const productWeight = document.getElementById('product-weight');
    const manualCalories = document.getElementById('manual-calories');
    const manualProteins = document.getElementById('manual-proteins');
    const manualFats = document.getElementById('manual-fats');
    const manualCarbs = document.getElementById('manual-carbs');
    const addProductBtn = document.getElementById('add-product-btn');
    const clearProductsBtn = document.getElementById('clear-products-btn');
    const productsList = document.getElementById('products-list');
    const totalCalories = document.getElementById('total-calories');
    const totalProteins = document.getElementById('total-proteins');
    const totalFats = document.getElementById('total-fats');
    const totalCarbs = document.getElementById('total-carbs');
    
    // Элементы формы умного расчета
    const femaleOption = document.getElementById('female-option');
    const maleOption = document.getElementById('male-option');
    const ageInput = document.getElementById('age-input');
    const heightInput = document.getElementById('height-input');
    const weightInput = document.getElementById('weight-input');
    const lowActivity = document.getElementById('low-activity');
    const mediumActivity = document.getElementById('medium-activity');
    const highActivity = document.getElementById('high-activity');
    const loseWeight = document.getElementById('lose-weight');
    const maintainWeight = document.getElementById('maintain-weight');
    const gainWeight = document.getElementById('gain-weight');
    const harrisFormula = document.getElementById('harris-formula');
    const mifflinFormula = document.getElementById('mifflin-formula');
    const calculateBtn = document.getElementById('calculate-btn');
    const mealOptions = document.querySelectorAll('.meal-option');
    const backToCalcBtn = document.getElementById('back-to-calc-btn');
    
    // Элементы страницы результатов
    const caloriesResult = document.getElementById('calories-result');
    const proteinsResult = document.getElementById('proteins-result');
    const fatsResult = document.getElementById('fats-result');
    const carbsResult = document.getElementById('carbs-result');
    const mealsDistribution = document.getElementById('meals-distribution');
    
    // История посещения страниц
    const pageHistory = ['main'];
    
    // Текущий язык (по умолчанию русский)
    let currentLanguage = 'ru';
    // Количество приемов пищи (по умолчанию 3)
    let mealsPerDay = 3;
    
    // Текущий выбранный продукт
    let selectedProduct = null;
    // Список добавленных продуктов
    let addedProducts = [];
    
    // Таймер для поиска продуктов
    let searchTimer = null;
    
    // Функция переключения страниц
    function showPage(pageId) {
        // Скрываем все страницы
        Object.values(pages).forEach(page => {
            page.classList.remove('active');
        });
        
        // Показываем нужную страницу
        pages[pageId].classList.add('active');
        
        // Добавляем в историю, если это не текущая страница
        if (pageHistory[pageHistory.length - 1] !== pageId) {
            pageHistory.push(pageId);
        }
        
        // Устанавливаем фон для страниц (только градиент для всех, кроме главной)
        if (pageId !== 'main') {
            document.body.style.background = 'linear-gradient(to bottom, #38cd17, #CDDC39)';
        }
    }
    
    // Функция возврата назад
    function goBack() {
        if (pageHistory.length > 1) {
            pageHistory.pop();
            const prevPage = pageHistory[pageHistory.length - 1];
            showPage(prevPage);
        }
    }
    
    // Функция обновления (переход на главный экран)
    function refreshPage() {
        showPage('main');
        // Очищаем историю и добавляем только главную страницу
        pageHistory.length = 0;
        pageHistory.push('main');
    }
    
    // Функция смены языка
    function changeLanguage(lang) {
        currentLanguage = lang;
        htmlLang.setAttribute('lang', lang);
        
        // Обновляем текст для всех элементов с атрибутами data-lang-ru и data-lang-en
        document.querySelectorAll('[data-lang-ru], [data-lang-en]').forEach(el => {
            const text = el.getAttribute(`data-lang-${lang}`);
            if (text) el.textContent = text;
        });
        
        // Обновляем плейсхолдеры для полей ввода
        document.querySelectorAll('input[data-lang-ru-placeholder]').forEach(input => {
            const placeholder = input.getAttribute(`data-lang-${lang}-placeholder`);
            if (placeholder) input.placeholder = placeholder;
        });
        
        // Обновляем выделение выбранного языка
        if (lang === 'ru') {
            langRuBtn.classList.add('selected');
            langEnBtn.classList.remove('selected');
        } else {
            langEnBtn.classList.add('selected');
            langRuBtn.classList.remove('selected');
        }
        
        // Если на странице результатов, обновляем распределение по приемам пищи
        if (pages.result.classList.contains('active')) {
            generateMealDistribution(
                parseInt(caloriesResult.textContent),
                parseInt(proteinsResult.textContent),
                parseInt(fatsResult.textContent),
                parseInt(carbsResult.textContent)
            );
        }
    }
    
    // Функция для выбора пола
    function selectGender(gender) {
        femaleOption.classList.remove('selected');
        maleOption.classList.remove('selected');
        if (gender === 'female') {
            femaleOption.classList.add('selected');
        } else {
            maleOption.classList.add('selected');
        }
    }
    
    // Функция для выбора уровня активности
    function selectActivity(level) {
        lowActivity.classList.remove('selected');
        mediumActivity.classList.remove('selected');
        highActivity.classList.remove('selected');
        document.getElementById(level).classList.add('selected');
    }
    
    // Функция для выбора цели
    function selectGoal(goal) {
        loseWeight.classList.remove('selected');
        maintainWeight.classList.remove('selected');
        gainWeight.classList.remove('selected');
        document.getElementById(goal).classList.add('selected');
    }
    
    // Функция для выбора формулы
    function selectFormula(formula) {
        harrisFormula.classList.remove('selected');
        mifflinFormula.classList.remove('selected');
        document.getElementById(formula).classList.add('selected');
    }
    
    // Функция для выбора количества приемов пищи
    function selectMeals(meals) {
        mealOptions.forEach(option => {
            option.classList.remove('selected');
            if (option.getAttribute('data-meals') === meals) {
                option.classList.add('selected');
                mealsPerDay = parseInt(meals);
            }
        });
    }
    
    // Функция расчета калорий и макронутриентов
    function calculateCalories() {
        const gender = femaleOption.classList.contains('selected') ? 'female' : 'male';
        const age = parseInt(ageInput.value) || 0;
        const height = parseInt(heightInput.value) || 0;
        const weight = parseInt(weightInput.value) || 0;
        const activity = lowActivity.classList.contains('selected') ? 'low' : 
                        mediumActivity.classList.contains('selected') ? 'medium' : 'high';
        const goal = loseWeight.classList.contains('selected') ? 'lose' : 
                    maintainWeight.classList.contains('selected') ? 'maintain' : 'gain';
        const formula = harrisFormula.classList.contains('selected') ? 'harris' : 'mifflin';
        
        // Проверка введенных данных
        if (age < 10 || age > 120) {
            alert(currentLanguage === 'ru' ? 'Пожалуйста, введите корректный возраст (10-120 лет)' : 'Please enter a valid age (10-120 years)');
            return;
        }
        
        if (height < 100 || height > 250) {
            alert(currentLanguage === 'ru' ? 'Пожалуйста, введите корректный рост (100-250 см)' : 'Please enter a valid height (100-250 cm)');
            return;
        }
        
        if (weight < 30 || weight > 300) {
            alert(currentLanguage === 'ru' ? 'Пожалуйста, введите корректный вес (30-300 кг)' : 'Please enter a valid weight (30-300 kg)');
            return;
        }
        
        // Расчет базового метаболизма (BMR)
        let bmr;
        if (formula === 'harris') {
            if (gender === 'male') {
                bmr = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
            } else {
                bmr = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
            }
        } else { // Mifflin
            if (gender === 'male') {
                bmr = (10 * weight) + (6.25 * height) - (5 * age) + 5;
            } else {
                bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
            }
        }
        
        // Учет уровня активности
        let activityFactor;
        switch(activity) {
            case 'low': activityFactor = 1.2; break;
            case 'medium': activityFactor = 1.55; break;
            case 'high': activityFactor = 1.9; break;
            default: activityFactor = 1.2;
        }
        
        let calories = bmr * activityFactor;
        
        // Учет цели
        switch(goal) {
            case 'lose': calories *= 0.85; break; // Уменьшаем на 15% для похудения
            case 'gain': calories *= 1.15; break; // Увеличиваем на 15% для набора веса
        }
        
        // Расчет макронутриентов (белки, жиры, углеводы)
        const proteins = Math.round((gender === 'male' ? weight * 2.2 : weight * 1.8));
        const fats = Math.round(calories * 0.25 / 9); // 25% от калорий, 9 ккал/г жира
        const carbs = Math.round((calories - (proteins * 4) - (fats * 9)) / 4); // Остаток на углеводы
        
        // Обновляем результаты
        caloriesResult.textContent = Math.round(calories);
        proteinsResult.textContent = proteins;
        fatsResult.textContent = fats;
        carbsResult.textContent = Math.round(carbs);
        
        // Генерируем распределение по приемам пищи
        generateMealDistribution(Math.round(calories), proteins, fats, Math.round(carbs));
        
        // Переходим на страницу результатов
        showPage('result');
    }
    
    // Функция генерации распределения по приемам пищи
    function generateMealDistribution(calories, proteins, fats, carbs) {
        mealsDistribution.innerHTML = '';
        
        // Распределяем калории и макронутриенты по приемам пищи
        const meals = mealsPerDay;
        const caloriesPerMeal = Math.round(calories / meals);
        const proteinsPerMeal = Math.round(proteins / meals);
        const fatsPerMeal = Math.round(fats / meals);
        const carbsPerMeal = Math.round(carbs / meals);
        
        // Названия приемов пищи в зависимости от количества
        const mealNames = {
            3: currentLanguage === 'ru' ? ['Завтрак', 'Обед', 'Ужин'] : ['Breakfast', 'Lunch', 'Dinner'],
            4: currentLanguage === 'ru' ? ['Завтрак', 'Перекус', 'Обед', 'Ужин'] : ['Breakfast', 'Snack', 'Lunch', 'Dinner'],
            5: currentLanguage === 'ru' ? ['Завтрак', 'Перекус', 'Обед', 'Перекус', 'Ужин'] : ['Breakfast', 'Snack', 'Lunch', 'Snack', 'Dinner'],
            6: currentLanguage === 'ru' ? ['Завтрак', 'Перекус', 'Обед', 'Перекус', 'Ужин', 'Перекус'] : ['Breakfast', 'Snack', 'Lunch', 'Snack', 'Dinner', 'Snack']
        };
        
        // Создаем элементы для каждого приема пищи
        for (let i = 0; i < meals; i++) {
            const mealItem = document.createElement('div');
            mealItem.className = 'meal-item';
            
            const mealName = document.createElement('div');
            mealName.textContent = mealNames[meals][i];
            mealName.style.fontWeight = 'bold';
            mealName.style.marginBottom = '5px';
            
            const mealDetails = document.createElement('div');
            mealDetails.innerHTML = `
                ${currentLanguage === 'ru' ? 'Калории:' : 'Calories:'} ${caloriesPerMeal} <br>
                ${currentLanguage === 'ru' ? 'Белки:' : 'Proteins:'} ${proteinsPerMeal} <br>
                ${currentLanguage === 'ru' ? 'Жиры:' : 'Fats:'} ${fatsPerMeal} <br>
                ${currentLanguage === 'ru' ? 'Углеводы:' : 'Carbs:'} ${carbsPerMeal} 
            `;
            
            mealItem.appendChild(mealName);
            mealItem.appendChild(mealDetails);
            mealsDistribution.appendChild(mealItem);
        }
    }

    // Функция поиска продуктов через Open Food Facts API
    async function searchProducts(query) {
        if (!query || query.length < 2) {
            searchResults.style.display = 'none';
            return;
        }

        try {
            // Кодируем запрос для URL
            const encodedQuery = encodeURIComponent(query);
            const url = `https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodedQuery}&page_size=5&json=1`;
            
            const response = await fetch(url);
            const data = await response.json();
            
            displaySearchResults(data.products);
        } catch (error) {
            console.error('Ошибка при поиске продуктов:', error);
            searchResults.innerHTML = currentLanguage === 'ru' 
                ? '<div class="product-item">Ошибка загрузки данных</div>' 
                : '<div class="product-item">Error loading data</div>';
            searchResults.style.display = 'block';
        }
    }

    // Функция отображения результатов поиска
    function displaySearchResults(products) {
        if (!products || products.length === 0) {
            searchResults.innerHTML = currentLanguage === 'ru' 
                ? '<div class="product-item">Продукты не найдены</div>' 
                : '<div class="product-item">No products found</div>';
            searchResults.style.display = 'block';
            return;
        }

        searchResults.innerHTML = '';
        products.forEach(product => {
            const productName = product.product_name || currentLanguage === 'ru' ? 'Неизвестный продукт' : 'Unknown product';
            const brand = product.brands || '';
            const calories = product.nutriments?.['energy-kcal_100g'] || 0;
            const proteins = product.nutriments?.['proteins_100g'] || 0;
            const fats = product.nutriments?.['fat_100g'] || 0;
            const carbs = product.nutriments?.['carbohydrates_100g'] || 0;

            const productElement = document.createElement('div');
            productElement.className = 'product-item';
            productElement.dataset.calories = calories;
            productElement.dataset.proteins = proteins;
            productElement.dataset.fats = fats;
            productElement.dataset.carbs = carbs;
            productElement.innerHTML = `
                <div class="product-name">${productName}</div>
                <div class="product-brand">${brand}</div>
                <div>${currentLanguage === 'ru' ? 'Калории:' : 'Calories:'} ${calories} ккал</div>
            `;
            
            productElement.addEventListener('click', () => {
                selectedProduct = {
                    name: productName,
                    brand: brand,
                    calories: calories,
                    proteins: proteins,
                    fats: fats,
                    carbs: carbs
                };
                
                productSearch.value = productName;
                searchResults.style.display = 'none';
                updateManualNutrients();
            });
            
            searchResults.appendChild(productElement);
        });
        searchResults.style.display = 'block';
    }

    // Функция обновления значений КБЖУ при изменении веса
    function updateManualNutrients() {
        if (!selectedProduct) return;
        
        const weight = parseFloat(productWeight.value) || 100;
        const weightRatio = weight / 100;
        
        manualCalories.textContent = Math.round(selectedProduct.calories * weightRatio);
        manualProteins.textContent = (selectedProduct.proteins * weightRatio).toFixed(1);
        manualFats.textContent = (selectedProduct.fats * weightRatio).toFixed(1);
        manualCarbs.textContent = (selectedProduct.carbs * weightRatio).toFixed(1);
    }

    // Функция добавления продукта в список
    function addProduct() {
        if (!selectedProduct) {
            alert(currentLanguage === 'ru' 
                ? 'Пожалуйста, выберите продукт' 
                : 'Please select a product');
            return;
        }
        
        const weight = parseFloat(productWeight.value) || 100;
        const weightRatio = weight / 100;
        
        const productToAdd = {
            name: selectedProduct.name,
            brand: selectedProduct.brand,
            weight: weight,
            calories: Math.round(selectedProduct.calories * weightRatio),
            proteins: parseFloat((selectedProduct.proteins * weightRatio).toFixed(1)),
            fats: parseFloat((selectedProduct.fats * weightRatio).toFixed(1)),
            carbs: parseFloat((selectedProduct.carbs * weightRatio).toFixed(1))
        };
        
        addedProducts.push(productToAdd);
        updateProductsList();
        updateTotalNutrients();
    }

    // Функция обновления списка добавленных продуктов
    function updateProductsList() {
        productsList.innerHTML = '';
        
        addedProducts.forEach((product, index) => {
            const productElement = document.createElement('div');
            productElement.className = 'added-product';
            productElement.innerHTML = `
                <div class="product-info">
                    <div><strong>${product.name}</strong>${product.brand ? ` (${product.brand})` : ''}</div>
                    <div>${product.weight}g: ${product.calories} ккал</div>
                </div>
                <div class="product-actions">
                    <button class="delete-btn" data-index="${index}">✕</button>
                </div>
            `;
            
            productsList.appendChild(productElement);
        });
        
        // Добавляем обработчики для кнопок удаления
        document.querySelectorAll('.delete-btn').forEach(button => {
            button.addEventListener('click', function() {
                const index = parseInt(this.dataset.index);
                addedProducts.splice(index, 1);
                updateProductsList();
                updateTotalNutrients();
            });
        });
    }

    // Функция обновления итоговых значений КБЖУ
    function updateTotalNutrients() {
        let totalCal = 0;
        let totalProt = 0;
        let totalFat = 0;
        let totalCarb = 0;
        
        addedProducts.forEach(product => {
            totalCal += product.calories;
            totalProt += product.proteins;
            totalFat += product.fats;
            totalCarb += product.carbs;
        });
        
        totalCalories.textContent = totalCal;
        totalProteins.textContent = totalProt.toFixed(1);
        totalFats.textContent = totalFat.toFixed(1);
        totalCarbs.textContent = totalCarb.toFixed(1);
    }

    // Функция очистки списка продуктов
    function clearProducts() {
        addedProducts = [];
        updateProductsList();
        updateTotalNutrients();
    }

    
let isLoggedIn = false;


function secureShowPage(pageId) {
    const publicPages = ['main', 'account', 'recover', 'settings', 'register'];
    if (!isLoggedIn && !publicPages.includes(pageId)) {
        return; // silently deny access
    }
    showPage(pageId);
}

   
// Перехватываем вызовы меню
Object.keys(menuItems).forEach(key => {
    menuItems[key].addEventListener('click', function () {
        secureShowPage(key === 'calculator' ? 'calculatorChoice' : key);
        sideMenu.classList.remove('open');
        menuOverlay.classList.remove('active');
    });
});

// Вход



// Обработчики событий
    menuBtn.addEventListener('click', function() {
        sideMenu.classList.toggle('open');
        menuOverlay.classList.toggle('active');
        this.classList.toggle('menu-animate');
        
        // Анимация иконки меню
        setTimeout(() => {
            this.classList.remove('menu-animate');
        }, 500);
    });
    
    menuOverlay.addEventListener('click', function() {
        sideMenu.classList.remove('open');
        this.classList.remove('active');
    });
    
    backBtn.addEventListener('click', goBack);
    refreshBtn.addEventListener('click', refreshPage);
    
    // Обработчики для пунктов меню
    menuItems.account.addEventListener('click', function() {
        showPage('account');
        sideMenu.classList.remove('open');
        menuOverlay.classList.remove('active');
    });
    
    menuItems.calculator.addEventListener('click', function() {
        showPage('calculatorChoice');
        sideMenu.classList.remove('open');
        menuOverlay.classList.remove('active');
    });
    
    menuItems.settings.addEventListener('click', function() {
        showPage('settings');
        sideMenu.classList.remove('open');
        menuOverlay.classList.remove('active');
    });
    
    menuItems.smartCalc.addEventListener('click', function() {
        showPage('smartCalc');
        sideMenu.classList.remove('open');
        menuOverlay.classList.remove('active');
    });
    
    
forgotPasswordBtn.addEventListener('click', function(e) {
    e.preventDefault();
    showPage('recover');
});




// Обработчики для формы входа
    
    
    
    
    forgotPasswordBtn.addEventListener('click', function(e) {
        e.preventDefault();
        
    });
    
    // Обработчики для настроек языка
    langRuBtn.addEventListener('click', function() {
        changeLanguage('ru');
    });
    
    langEnBtn.addEventListener('click', function() {
        changeLanguage('en');
    });
    
    // Обработчики для выбора калькулятора
    manualCalculatorBtn.addEventListener('click', function() {
        showPage('manualCalc');
    });
    
    readyMealsCalculatorBtn.addEventListener('click', function() {
        showPage('readyMeals');
    });
    
    // Обработчики для формы умного расчета
    femaleOption.addEventListener('click', function() {
        selectGender('female');
    });
    
    maleOption.addEventListener('click', function() {
        selectGender('male');
    });
    
    lowActivity.addEventListener('click', function() {
        selectActivity('low-activity');
    });
    
    mediumActivity.addEventListener('click', function() {
        selectActivity('medium-activity');
    });
    
    highActivity.addEventListener('click', function() {
        selectActivity('high-activity');
    });
    
    loseWeight.addEventListener('click', function() {
        selectGoal('lose-weight');
    });
    
    maintainWeight.addEventListener('click', function() {
        selectGoal('maintain-weight');
    });
    
    gainWeight.addEventListener('click', function() {
        selectGoal('gain-weight');
    });
    
    harrisFormula.addEventListener('click', function() {
        selectFormula('harris-formula');
    });
    
    mifflinFormula.addEventListener('click', function() {
        selectFormula('mifflin-formula');
    });
    
    mealOptions.forEach(option => {
        option.addEventListener('click', function() {
            selectMeals(this.getAttribute('data-meals'));
        });
    });
    
    calculateBtn.addEventListener('click', calculateCalories);
    
    backToCalcBtn.addEventListener('click', function() {
        showPage('smartCalc');
    });
    
    
    const backToReadyMealsBtn = document.getElementById('back-to-calculator-choice');
    if (backToReadyMealsBtn) {
        backToReadyMealsBtn.addEventListener('click', function () {
            showPage('calculatorChoice');
        });
    }


    
    const backToMainFromProfileBtn = document.getElementById('back-to-main-from-profile');
    if (backToMainFromProfileBtn) {
        backToMainFromProfileBtn.addEventListener('click', function () {
            showPage('main');
        });
    }


    // Обработчики для ручного ввода
    productSearch.addEventListener('input', function() {
        clearTimeout(searchTimer);
        searchTimer = setTimeout(() => {
            searchProducts(this.value.trim());
        }, 300);
    });
    
    // Закрытие результатов при клике вне области
    document.addEventListener('click', function(e) {
        if (!productSearch.contains(e.target)) {
            searchResults.style.display = 'none';
        }
    });
    
    productWeight.addEventListener('input', updateManualNutrients);
    
    addProductBtn.addEventListener('click', addProduct);
    
    clearProductsBtn.addEventListener('click', clearProducts);
    
    // Инициализация приложения
    document.addEventListener('DOMContentLoaded', function() {
        // Установка русского языка по умолчанию
        changeLanguage('ru');
        
        // Установка значений по умолчанию для формы расчета
        ageInput.value = '25';
        heightInput.value = '170';
        weightInput.value = '70';
        
        // Установка обработчиков для ручного ввода
        updateManualNutrients();
    
    const recoverForm = document.getElementById('recover-form');
    if (recoverForm) {
        recoverForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('recover-username').value.trim();
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;

            if (newPassword !== confirmPassword) {
                alert(currentLanguage === 'ru' ? 'Пароли не совпадают' : 'Passwords do not match');
                return;
            }

            if (!username || !newPassword) {
                alert(currentLanguage === 'ru' ? 'Пожалуйста, заполните все поля' : 'Please fill all fields');
                return;
            }

            
            showPage('account-page');
        });
    }


    const registerForm = document.getElementById('register-form');
    if (registerForm) {
        registerForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('register-username').value.trim();
            const password = document.getElementById('register-password').value;
            const confirm = document.getElementById('register-confirm').value;

            if (!username || !password || !confirm) return;
            if (password !== confirm) return;

            showPage('account-page');
        });
    }

    const registerBtn = document.getElementById('register-btn');
    if (registerBtn) {
        registerBtn.addEventListener('click', function(e) {
            e.preventDefault();
            showPage('register');
        });
    }


    loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        isLoggedIn = true;
        showPage('main');
    });

});
</script>
</body>
</html>
